<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Greekaway – Εκδρομή</title>

  <!-- Icons + βασικό style όπως στο welcome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/trip.css?v=20251019">
  <link rel="stylesheet" href="/css/booking.css">

  <!-- Κύριος κώδικας -->
  <!-- Flatpickr (dark theme) for cinematic date picker -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/dark.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <!-- Flatpickr locales: Greek + common site languages for calendar month/day names -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/gr.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/de.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/fr.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/he.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/it.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/nl.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/sv.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/zh.js"></script>
  <script src="/js/carousel-config.js"></script>
  <!-- Load i18n early so booking/labels can translate immediately -->
  <script src="/js/i18n.js?v=20251022" defer></script>
  <!-- App logic (cache-busted) -->
  <script src="/js/main.js?v=20251022" defer></script>
</head>

<body>
  <!-- Back to categories button (appears on trip view) -->
  <button id="backToCatsBtn" class="back-btn" data-i18n-aria="trips_ui.backToCategories" style="display:none;">
    <i class="fas fa-arrow-left"></i>
  </button>
  <!-- Περιεχόμενο εκδρομής -->
  <section id="trip-section" class="trip-section">
    <h2 id="trip-title"></h2>
    <!-- Trip price (base price for one traveler) -->
    <div id="trip-price" class="price-tag" style="display:none; max-width: 220px; margin: 8px 0;">—</div>
    <p id="trip-description"></p>

    <div id="map"></div>
    <div id="stops"></div>
  </section>

  <!-- Overlays -->
  <div id="aiOverlay" class="overlay" role="dialog" aria-modal="true">
    <button class="close-overlay" onclick="closeOverlay('aiOverlay')" data-i18n-aria="ui.close">×</button>
    <div class="overlay-inner">
      <h2 data-i18n="nav.ai">AI Assistant</h2>
        <p data-i18n="welcome.ask">Ρωτήστε μας ό,τι θέλετε για την εκδρομή σας!</p>
    </div>
  </div>

  <div id="profileOverlay" class="overlay" role="dialog" aria-modal="true">
    <button class="close-overlay" onclick="closeOverlay('profileOverlay')" data-i18n-aria="ui.close">×</button>
    <div class="overlay-inner">
      <h2 data-i18n="nav.profile">Το Προφίλ μου</h2>
        <p data-i18n="profile.info">Εδώ θα δείτε τις εκδρομές που έχετε κάνει και τις κρατήσεις σας.</p>
    </div>
  </div>

  <div id="aboutOverlay" class="overlay" role="dialog" aria-modal="true">
    <button class="close-overlay" onclick="closeOverlay('aboutOverlay')" data-i18n-aria="ui.close">×</button>
    <div class="overlay-inner">
      <h2 data-i18n="about.title">Σχετικά με εμάς</h2>
      <p data-i18n="about.text">Το Greekaway δημιουργήθηκε για να σας προσφέρει επιλεγμένες εκδρομές στην Ελλάδα με άνεση, τεχνολογία και στυλ.</p>
    </div>
  </div>

  <div id="paymentOverlay" class="overlay" role="dialog" aria-modal="true">
    <button class="close-overlay" onclick="closeOverlay('paymentOverlay')" data-i18n-aria="ui.close">×</button>
    <div class="overlay-inner">
      <h2 data-i18n="nav.checkout">Πληρωμή</h2>
        <p data-i18n="checkout.info">Η φόρμα πληρωμής θα εμφανίζεται εδώ.</p>
    </div>
  </div>

  <div id="bookingOverlay" class="overlay" role="dialog" aria-modal="true">
    <button class="close-overlay" onclick="closeOverlay('bookingOverlay')" data-i18n-aria="ui.close">×</button>
    <div class="overlay-inner">
      <h2 id="bookingOverlayTitle" data-i18n="booking.title">Κράτηση</h2>
      <form id="bookingForm" class="booking-form">
        <input type="hidden" name="trip_id" id="bookingTripId">

        <div class="row">
          <label for="bookingDate" data-i18n="booking.date">Ημερομηνία</label>
          <input id="bookingDate" name="date" type="date" required data-i18n-placeholder="booking.date_placeholder" placeholder="YYYY-MM-DD" />
        </div>

        <div class="row two-col">
          <div>
            <label for="bookingSeats" data-i18n="booking.seats">Θέσεις</label>
            <div class="seat-control">
              <button type="button" class="seat-dec" data-i18n-aria="booking.decrease">Μείωση</button>
              <input id="bookingSeats" name="seats" type="number" value="1" min="1" max="10" required />
              <button type="button" class="seat-inc" data-i18n-aria="booking.increase">Αύξηση</button>
            </div>
          </div>

          <div>
            <label for="bookingPrice" data-i18n="booking.total">Σύνολο</label>
            <div id="bookingPrice" class="price-tag">—</div>
          </div>
        </div>

        <div class="row">
          <label for="bookingName" data-i18n="checkout.name">Όνομα</label>
          <input id="bookingName" name="user_name" type="text" data-i18n-placeholder="booking.name_placeholder" placeholder="Full name" required />
        </div>

        <div class="row">
          <label for="bookingEmail" data-i18n="checkout.email">Email</label>
          <input id="bookingEmail" name="user_email" type="email" data-i18n-placeholder="booking.email_placeholder" placeholder="name@example.com" required />
        </div>

        <div class="row section-title"><h3 data-i18n="booking.traveler_profile">Προφίλ Ταξιδιώτη</h3></div>
        <div class="row two-col">
          <div>
            <label for="travelerProfile" data-i18n="booking.traveler_type">Traveler Type</label>
            <select id="travelerProfile" name="travelerProfile">
              <option value="explorer" data-i18n="booking.traveler_type_options.explorer">🌍 Explorers</option>
              <option value="relaxed" data-i18n="booking.traveler_type_options.relaxed">😌 Relaxed Travelers</option>
              <option value="family" data-i18n="booking.traveler_type_options.family">👨‍👩‍👧 Family Style</option>
              <option value="solo" data-i18n="booking.traveler_type_options.solo">🚶 Solo Adventurers</option>
            </select>
          </div>
          <div>
            <label for="travelStyle" data-i18n="booking.travel_style">Travel Style</label>
            <select id="travelStyle" name="travelStyle">
              <option value="sociable" data-i18n="booking.travel_style_options.sociable">👥 Sociable</option>
              <option value="quiet" data-i18n="booking.travel_style_options.quiet">🤫 Quiet</option>
              <option value="cultural" data-i18n="booking.travel_style_options.cultural">🏛️ Cultural</option>
              <option value="nature" data-i18n="booking.travel_style_options.nature">🌲 Nature-oriented</option>
            </select>
          </div>
        </div>

        <div class="row two-col">
          <div>
            <label for="preferredLanguage" data-i18n="booking.preferred_language">Προτιμώμενη Γλώσσα</label>
            <select id="preferredLanguage" name="preferredLanguage">
              <option value="en" data-i18n="booking.preferred_language_options.en">🇬🇧 English</option>
              <option value="fr" data-i18n="booking.preferred_language_options.fr">🇫🇷 Français</option>
              <option value="de" data-i18n="booking.preferred_language_options.de">🇩🇪 Deutsch</option>
              <option value="el" data-i18n="booking.preferred_language_options.el">🇬🇷 Ελληνικά</option>
              <option value="it" data-i18n="booking.preferred_language_options.it">🇮🇹 Italiano</option>
              <option value="es" data-i18n="booking.preferred_language_options.es">🇪🇸 Español</option>
              <option value="zh" data-i18n="booking.preferred_language_options.zh">🇨🇳 中文</option>
              <option value="he" data-i18n="booking.preferred_language_options.he">🇮🇱 עברית</option>
              <option value="nl" data-i18n="booking.preferred_language_options.nl">🇳🇱 Nederlands</option>
              <option value="sv" data-i18n="booking.preferred_language_options.sv">🇸🇪 Svenska</option>
              <option value="ko" data-i18n="booking.preferred_language_options.ko">🇰🇷 한국어</option>
              <option value="pt" data-i18n="booking.preferred_language_options.pt">🇵🇹 Português</option>
              <option value="ru" data-i18n="booking.preferred_language_options.ru">🇷🇺 Русский</option>
            </select>
          </div>
          <div>
            <label for="travelTempo" data-i18n="booking.daily_rhythm">Στυλ Ώρας / Ημέρας</label>
            <select id="travelTempo" name="travelTempo">
              <option value="early" data-i18n="booking.daily_rhythm_options.early">🌅 Early riser</option>
              <option value="night" data-i18n="booking.daily_rhythm_options.night">🌙 Night type</option>
              <option value="talkative" data-i18n="booking.daily_rhythm_options.talkative">💬 Talkative</option>
              <option value="reserved" data-i18n="booking.daily_rhythm_options.reserved">🙊 Reserved</option>
            </select>
          </div>
        </div>

        <div class="row actions">
          <button class="btn" type="submit" data-i18n="booking.create">Δημιούργησε κράτηση</button>
          <button type="button" class="btn ghost" onclick="closeOverlay('bookingOverlay')" data-i18n="ui.cancel">Άκυρο</button>
        </div>
      </form>

      <div id="bookingResult" class="booking-result" style="display:none"></div>
    </div>
  </div>

  <!-- New light-blue overlay for Step 2 (details) -->
  <div id="step2Overlay" class="overlay" role="dialog" aria-modal="true">
    <button class="close-overlay" onclick="closeOverlay('step2Overlay')" data-i18n-aria="ui.close">×</button>
    <div class="overlay-inner" id="step2OverlayInner">
      <!-- Step 2 content is injected dynamically -->
    </div>
  </div>

  <!-- ===== FOOTER ===== -->
  <footer>
    <a href="/index.html">
      <i class="fas fa-home"></i>
      <span data-i18n="nav.home">Home</span>
    </a>

    <a href="javascript:void(0)" onclick="openOverlay('aboutOverlay')">
      <i class="fas fa-info-circle"></i>
      <span data-i18n="nav.about">About Us</span>
    </a>

    <a href="javascript:void(0)" class="central-btn">
      <i class="fas fa-bell"></i>
      <span data-i18n="nav.book">Online Κράτηση</span>
    </a>

    <a href="javascript:void(0)" onclick="openOverlay('aiOverlay')">
      <i class="fas fa-comments"></i>
      <span data-i18n="nav.ai">AI Assistant</span>
    </a>

    <a href="javascript:void(0)" onclick="openOverlay('profileOverlay')">
      <i class="fas fa-user"></i>
      <span data-i18n="nav.profile">Προφίλ</span>
    </a>
  </footer>

  <script src="/js/overlay-manager.js" defer></script>
  <script src="/js/footer.js?v=20251021" defer></script>
  <script src="/js/assistant.js" defer></script>

  <!-- Google Maps -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY"></script>
</body>
</html>