/* Greekaway theme overrides for category selection and trip listing */
:root {
  --ga-card-bg: #0E1520; /* deep navy black */
  --ga-gold: #D4AF37;    /* gold for texts */
  --ga-radius-sm: 16px;
  --ga-radius-md: 20px;
  --ga-shadow-1: 0 10px 22px rgba(0,0,0,0.42), inset 0 1px 0 rgba(255,255,255,0.03);
  --ga-shadow-2: 0 22px 48px rgba(0,0,0,0.55), inset 0 1px 0 rgba(255,255,255,0.03);
  --ga-shadow-press: 0 0 22px rgba(255,255,255,0.22);
}

/* Cinematic zoom + blur once on load */
@keyframes gaZoomBlur {
  0%   { transform: scale(0.92); opacity: 0; filter: blur(6px); }
  60%  { opacity: 1; filter: blur(2px); }
  100% { transform: scale(1); opacity: 1; filter: blur(0); }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .ga-animate, body.is-loaded .ga-animate { animation: none !important; filter: none !important; }
}

/* ============ Category selection (trips.html) ============ */
/* Flat variant (no PNG), unified navy background and icons */
body.ga-variant-flat .category-btn {
  background: var(--ga-card-bg) !important;
  border: 1px solid rgba(255,255,255,0.06) !important;
  box-shadow: var(--ga-shadow-1) !important;
  border-radius: var(--ga-radius-md) !important;
  overflow: visible; /* allow under-glow to be visible below tile */
  position: relative;
  display: block;
}

/* Hide legacy PNGs in flat variant */
body.ga-variant-flat .category-btn img { display: none !important; }

/* Gold label across all categories */
.category-btn .cat-label { color: var(--ga-gold) !important; font-weight: 600; }

/* Insert SVG icon per category (centered) */
/* Make icons gold using SVG as mask (so color is controlled by CSS) */
body.ga-variant-flat .category-btn::after {
  content: "";
  position: absolute; inset: 0;
  margin: auto;
  width: 56%; height: 56%;
  background-color: var(--ga-gold);
  opacity: 0.98; z-index: 2;
}
/* Position icon slightly higher to leave room for label at bottom */
body.ga-variant-flat .category-btn::after { top: 10%; bottom: auto; }
/* Apply masks per category */
body.ga-variant-flat .category-btn.cat-sea::after {
  -webkit-mask-image: url('/images/icons/sea.svg');
          mask-image: url('/images/icons/sea.svg');
  -webkit-mask-repeat: no-repeat; mask-repeat: no-repeat;
  -webkit-mask-position: center;  mask-position: center;
  -webkit-mask-size: contain;     mask-size: contain;
  top: 12%; /* fine-tune vertical centering: a touch lower */
}
body.ga-variant-flat .category-btn.cat-mountain::after {
  -webkit-mask-image: url('/images/icons/mountain.svg');
          mask-image: url('/images/icons/mountain.svg');
  -webkit-mask-repeat: no-repeat; mask-repeat: no-repeat;
  -webkit-mask-position: center;  mask-position: center;
  -webkit-mask-size: contain;     mask-size: contain;
}
/* Make mountain icon 10% larger than base (handled below with top offset) */
body.ga-variant-flat .category-btn.cat-culture::after {
  -webkit-mask-image: url('/images/icons/culture.svg');
          mask-image: url('/images/icons/culture.svg');
  -webkit-mask-repeat: no-repeat; mask-repeat: no-repeat;
  -webkit-mask-position: center;  mask-position: center;
  -webkit-mask-size: contain;     mask-size: contain;
}
/* Make mountain icon 10% larger than base + offset slightly higher */
/* Move the mountain icon further up (~two more clicks) */
body.ga-variant-flat .category-btn.cat-mountain::after { width: 68%; height: 68%; top: 0%; }

/* Place label under the icon inside the tile */
body.ga-variant-flat .category-btn .cat-label {
  position: absolute;
  left: 6px; right: 6px; bottom: 8px;
  text-align: center;
  font-weight: 700;
  color: var(--ga-gold) !important;
  z-index: 3;
}

/* Under-glow lip using ::before (shows below the tile on hover/press) */
body.ga-variant-flat .category-btn::before {
  content: "";
  position: absolute;
  left: 10%; right: 10%; bottom: -8px; height: 14px;
  border-radius: 14px;
  background: radial-gradient(60% 100% at 50% 0%, rgba(255,255,255,0.45), rgba(255,255,255,0) 70%);
  filter: blur(2px);
  opacity: 0; pointer-events: none; z-index: 0;
  transition: opacity 180ms ease, transform 180ms ease;
}

/* Subtle cinematic entrance once page loads */
/* Subtle cinematic entrance once page loads (unified for all tiles) */
body.is-loaded .category-btn { will-change: transform, opacity, filter; }
body.is-loaded .category-btn { animation: gaZoomBlur 760ms cubic-bezier(.22,.9,.32,1) both !important; }
/* small stagger using nth-child so tiles "walk" in */
body.is-loaded #categories-container .category-btn:nth-child(1){ animation-delay: 60ms; }
body.is-loaded #categories-container .category-btn:nth-child(2){ animation-delay: 120ms; }
body.is-loaded #categories-container .category-btn:nth-child(3){ animation-delay: 180ms; }
body.is-loaded #categories-container .category-btn:nth-child(4){ animation-delay: 240ms; }
body.is-loaded #categories-container .category-btn:nth-child(5){ animation-delay: 300ms; }
body.is-loaded #categories-container .category-btn:nth-child(6){ animation-delay: 360ms; }

/* Hover/active interactions: consistent 3D and white underglow when pressed */
/* Hover/press interactions: consistent 3D and white underglow when pressed */
.category-btn { transition: transform 200ms ease, box-shadow 200ms ease, filter 200ms ease; -webkit-tap-highlight-color: transparent; }
.category-btn:hover {
  transform: translateY(-6px) scale(1.05);
  box-shadow: var(--ga-shadow-2);
  /* white glow visible on hover as well */
  filter: drop-shadow(0 0 18px rgba(255,255,255,0.28));
}
.category-btn:hover::before { opacity: 1; transform: scaleX(1.02); }
/* Keyboard focus should show the same subtle glow */
.category-btn:focus-visible {
  outline: none;
  box-shadow: var(--ga-shadow-2), 0 0 0 2px rgba(255,255,255,0.22);
  filter: drop-shadow(0 0 18px rgba(255,255,255,0.28));
}
/* On press: enlarge slightly and show underglow */
.category-btn:active {
  transform: translateY(-2px) scale(1.04);
  box-shadow: var(--ga-shadow-2);
  filter: drop-shadow(0 0 18px rgba(255,255,255,0.34));
}
.category-btn:active::before { opacity: 1; transform: scaleX(1.06); }
/* Programmatic press class for reliable touch feedback */
.category-btn.is-pressing {
  transform: translateY(-2px) scale(1.04);
  box-shadow: var(--ga-shadow-2);
  filter: drop-shadow(0 0 18px rgba(255,255,255,0.34));
}
.category-btn.is-pressing::before { opacity: 1; transform: scaleX(1.06); }

/* ============ Trip listing cards (category pages) ============ */
/* Only on category listing view to avoid affecting other pages */
body[data-view="category"] #trips-container .trip-card {
  background: var(--ga-card-bg) !important;
  border: 1px solid rgba(255,255,255,0.06) !important;
  box-shadow: var(--ga-shadow-1) !important;
  color: var(--ga-gold) !important;
}
/* remove iOS blue tap highlight */
body[data-view="category"] #trips-container .trip-card { -webkit-tap-highlight-color: transparent; }
body[data-view="category"] #trips-container .trip-card h3 {
  color: var(--ga-gold) !important;
}

/* Remove any previous overlays when enforcing flat/navy style */
body[data-view="category"] #trips-container .trip-card::before { background: transparent !important; }

/* Cinematic entrance for trip tiles */
/* Cinematic entrance (unified with category tiles) */
body.is-loaded #trips-container .trip-card { will-change: transform, opacity, filter; }
body.is-loaded #trips-container .trip-card { animation: gaZoomBlur 760ms cubic-bezier(.22,.9,.32,1) both !important; }
body.is-loaded #trips-container .trip-card:nth-child(1){ animation-delay: 70ms; }
body.is-loaded #trips-container .trip-card:nth-child(2){ animation-delay: 140ms; }
body.is-loaded #trips-container .trip-card:nth-child(3){ animation-delay: 210ms; }
body.is-loaded #trips-container .trip-card:nth-child(4){ animation-delay: 280ms; }
/* Ensure special logo-pop tiles use the same animation */
body.is-loaded #trips-container .trip-card.logo-pop { animation: gaZoomBlur 760ms cubic-bezier(.22,.9,.32,1) both !important; }

/* Hover/active with white underglow */
body[data-view="category"] #trips-container .trip-card:hover {
  transform: translateY(-6px) scale(1.05);
  box-shadow: var(--ga-shadow-2);
  filter: drop-shadow(0 0 18px rgba(255,255,255,0.22));
}
/* Under-glow for trip cards (bottom lip) */
body[data-view="category"] #trips-container .trip-card::after {
  content: "";
  position: absolute; left: 10%; right: 10%; bottom: -8px; height: 14px;
  border-radius: 14px;
  background: radial-gradient(60% 100% at 50% 0%, rgba(255,255,255,0.42), rgba(255,255,255,0) 70%);
  filter: blur(2px); opacity: 0; pointer-events: none; z-index: 0;
  transition: opacity 180ms ease, transform 180ms ease;
}
body[data-view="category"] #trips-container .trip-card:hover::after { opacity: 1; transform: scaleX(1.02); }
body[data-view="category"] #trips-container .trip-card:focus-visible {
  outline: none;
  box-shadow: var(--ga-shadow-2), 0 0 0 2px rgba(255,255,255,0.2);
  filter: drop-shadow(0 0 18px rgba(255,255,255,0.22));
}
body[data-view="category"] #trips-container .trip-card:active {
  transform: translateY(-2px) scale(1.04);
  box-shadow: var(--ga-shadow-2);
  filter: drop-shadow(0 0 18px rgba(255,255,255,0.28));
}
body[data-view="category"] #trips-container .trip-card:active::after { opacity: 1; transform: scaleX(1.04); }
body[data-view="category"] #trips-container .trip-card.is-pressing {
  transform: translateY(-2px) scale(1.04);
  box-shadow: var(--ga-shadow-2);
  filter: drop-shadow(0 0 18px rgba(255,255,255,0.28));
}
body[data-view="category"] #trips-container .trip-card.is-pressing::after { opacity: 1; transform: scaleX(1.04); }

/* ============ Global unification across tiles ============ */
/* Base visuals: same background, border, shadow, radius and gold text */
:is(.category-btn, #trips-container .trip-card) {
  background: var(--ga-card-bg) !important;
  border: 1px solid rgba(255,255,255,0.06) !important;
  box-shadow: var(--ga-shadow-1) !important;
  border-radius: var(--ga-radius-md) !important;
  -webkit-tap-highlight-color: transparent;
}
/* Motion + interactions: same transitions */
body.is-loaded :is(.category-btn, #trips-container .trip-card) {
  transition: transform 200ms ease, box-shadow 200ms ease, filter 200ms ease;
}
/* unify label color for trip cards' titles and category labels */
:is(.category-btn .cat-label, #trips-container .trip-card h3) { color: var(--ga-gold) !important; }

/* Hover state: unified lift without extra white flash on trip cards */
:is(.category-btn, #trips-container .trip-card):hover {
  transform: translateY(-6px) scale(1.05);
  box-shadow: var(--ga-shadow-2) !important;
}
/* Specifically remove any hover filter only for trip cards (keep category look intact) */
#trips-container .trip-card:hover { filter: none !important; }

/* Press state for trip cards: remove the bright glow/flash; keep subtle press */
body[data-view="category"] #trips-container .trip-card:active,
body[data-view="category"] #trips-container .trip-card.is-pressing {
  transform: translateY(-2px) scale(1.04);
  box-shadow: var(--ga-shadow-2) !important;
  filter: none !important; /* kill white flash on tap */
}

/* Focus-visible: subtle ring, no big glow, consistent for both */
:is(.category-btn, #trips-container .trip-card):focus-visible {
  outline: none;
  box-shadow: var(--ga-shadow-2), 0 0 0 2px rgba(212,175,55,0.20) !important;
  filter: none !important;
}

/* Trip-card under-glow lip: soften intensity so there is no flash on press */
body[data-view="category"] #trips-container .trip-card::after {
  background: radial-gradient(60% 100% at 50% 0%, rgba(255,255,255,0.18), rgba(255,255,255,0) 70%) !important;
}
/* Only show the underglow on hover, not on press */
body[data-view="category"] #trips-container .trip-card:hover::after { opacity: 1; transform: scaleX(1.02); }
body[data-view="category"] #trips-container .trip-card:active::after,
body[data-view="category"] #trips-container .trip-card.is-pressing::after { opacity: 0; transform: none; }

/* Guard against legacy per-category hover glows (culture/mountain/sea) */
body[data-view="category"] #trips-container .trip-card.cat-culture:hover,
body[data-view="category"] #trips-container .trip-card.cat-mountain:hover,
body[data-view="category"] #trips-container .trip-card.cat-sea:hover {
  box-shadow: var(--ga-shadow-2) !important;
  filter: none !important;
}

/* ================= Anti-flash hardening for trip tiles ================= */
/* Kill tap highlight on the card and all interactive descendants */
body[data-view="category"] #trips-container .trip-card,
body[data-view="category"] #trips-container .trip-card * {
  -webkit-tap-highlight-color: transparent !important;
}
/* Avoid compositing flashes on iOS by isolating the container */
body[data-view="category"] #trips-container {
  isolation: isolate;
}
/* Force GPU layer on cards to reduce repaint flashes */
body[data-view="category"] #trips-container .trip-card {
  backface-visibility: hidden; -webkit-backface-visibility: hidden;
  transform: translateZ(0);
}
/* Do not animate filter on trip cards to avoid compositing flashes */
body[data-view="category"] #trips-container .trip-card { transition: transform 200ms ease, box-shadow 200ms ease !important; }
/* On touch devices, avoid fixed backgrounds which can cause white flash during tap */
@media (hover: none) and (pointer: coarse) {
  html[data-view="category"][data-category],
  body[data-view="category"][data-category] {
    background-attachment: scroll !important;
  }
}

/* As a final safeguard, disable fixed backgrounds globally on category pages */
html[data-category], body[data-category] { background-attachment: scroll !important; }

/* Remove any filter usage on trip-card interactive states and pseudo-elements */
#trips-container .trip-card,
#trips-container .trip-card::before,
#trips-container .trip-card::after,
#trips-container .trip-card:hover,
#trips-container .trip-card:active,
#trips-container .trip-card:focus-visible { filter: none !important; }

/* Light mode preservation: keep gold text visible */
@media (prefers-color-scheme: light) {
  .category-btn .cat-label,
  body[data-view="category"] #trips-container .trip-card h3 { color: var(--ga-gold) !important; }
}
