/* Booking-specific styles isolated from global theme */

/* Cinematic entrance for overlay content */
@keyframes bookingFadeSlideUp {
  0% { opacity: 0; transform: translateY(10px); }
  60% { opacity: 1; transform: translateY(-6px); }
  100% { opacity: 1; transform: translateY(0); }
}

/* Smooth fade + zoom entrance for step transitions */
@keyframes cinematicEntrance {
  0% { opacity: 0; transform: translateY(6px) scale(0.96); filter: blur(6px); }
  100% { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
}
@keyframes fadeInSoft { from { opacity: 0; } to { opacity: 1; } }

/* Scope everything under #bookingOverlay to avoid touching other overlays */
#bookingOverlay.overlay.active .overlay-inner { animation: bookingFadeSlideUp 360ms cubic-bezier(.2,.9,.2,1) both; }

/* Blurred dark overlay background just for booking overlay */
#bookingOverlay {
  background: rgba(7, 18, 26, 0.72);
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Calendar container + flatpickr sizing: center and avoid forced stretch */
#bookingOverlay .calendar-full {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center; /* center vertically */
  box-sizing: border-box;
  /* True full-screen modal feel for the calendar on step 1 */
  --booking-bar: 112px; /* bottom bar reserve incl. safe area */
  height: calc(100vh - var(--booking-bar));
  min-height: calc(100vh - var(--booking-bar));
  padding: 0;
  position: relative;
}
#bookingOverlay .flatpickr-calendar,
#bookingOverlay .booking-calendar {
  width: auto;
  max-width: 100%;
  box-sizing: border-box;
  border-radius: 14px;
  background: linear-gradient(180deg, rgba(34,51,69,0.96), rgba(28,46,66,0.96)); /* brighter navy */
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.04), inset 0 0 22px rgba(255,255,255,0.035), 0 22px 48px rgba(0,0,0,0.6); /* inner glow + deeper outer shadow */
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
  z-index: 1;
}

/* Glass-blur overlay behind the calendar for cinematic feel */
#bookingOverlay .calendar-full::before {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(7,18,26,0.7);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  filter: saturate(1.05);
  pointer-events: none;
}

/* Desktop: enlarge calendar ~28% and center visually */
@media (min-width: 900px) {
  #bookingOverlay .calendar-full { justify-content: center; align-items: center; }
  #bookingOverlay .flatpickr-calendar { transform: scale(1.28); transform-origin: center center; }
}

/* Flatpickr date cell brightening and highlights (scoped to booking overlay) */
#bookingOverlay .flatpickr-day { color: #eaf2f8; }
#bookingOverlay .flatpickr-day:hover { background: rgba(212,175,55,0.15); color: #ffffff; border-radius: 8px; }
#bookingOverlay .flatpickr-day.today:not(.selected):not(.startRange):not(.endRange) {
  background: linear-gradient(180deg, rgba(212,175,55,0.20), rgba(212,175,55,0.10));
  color: #fff;
  border-radius: 8px;
  box-shadow: inset 0 0 0 1px rgba(212,175,55,0.35), 0 0 0 2px rgba(212,175,55,0.18);
}
#bookingOverlay .flatpickr-day.selected,
#bookingOverlay .flatpickr-day.startRange,
#bookingOverlay .flatpickr-day.endRange {
  background: linear-gradient(180deg,#D4AF37,#E8C766);
  color: #08171b;
  border-radius: 8px;
  box-shadow: 0 8px 22px rgba(0,0,0,0.35);
}
#bookingOverlay .flatpickr-months { color: #f5f8fb; }
#bookingOverlay .flatpickr-weekday { color: rgba(255,255,255,0.75); }

/* Fixed bottom action bar with safe-area support; ensure it's above site footer */
#bookingOverlay .booking-actions {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  display: flex;
  flex-wrap: nowrap;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  background: #1B2A3A;
  padding: 16px;
  padding-bottom: calc(env(safe-area-inset-bottom) + 16px);
  z-index: 10000; /* on top of footer */
}
/* Small top margin above button bar for breathing room (applies via extra bottom padding) */
#bookingOverlay .booking-actions::before { content:''; position: absolute; top: -10px; left: 0; right: 0; height: 10px; background: transparent; }

#bookingOverlay .booking-actions .btn-primary,
#bookingOverlay .booking-actions .btn-secondary,
#bookingOverlay .btn-primary,
#bookingOverlay .btn-secondary,
#bookingOverlay button,
#bookingOverlay button.book-action {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 140px;
  padding: 0 18px;
  min-height: 48px;
  height: 48px; /* unify 48â€“52px band */
  border-radius: 6px;
  font-weight: 500;
  font-size: 16px;
  border: none;
  cursor: pointer;
  transition: transform 160ms ease, box-shadow 200ms ease;
  will-change: transform, box-shadow;
  box-shadow: 0 2px 8px rgba(0,0,0,0.35);
}

/* Keep premium depth on buttons */
#bookingOverlay .btn-primary { background: linear-gradient(180deg,#b8862a,#f9d65c); color: #07222a; box-shadow: 0 6px 18px rgba(185,140,40,0.18); }
/* Unify buttons: Greekaway gold with white text, soft shadow, hover lift */
#bookingOverlay .btn-primary {
  background: linear-gradient(180deg,#D4AF37,#E8C766);
  color: #ffffff;
  box-shadow: 0 2px 8px rgba(0,0,0,0.35);
}
#bookingOverlay .btn-secondary {
  background: linear-gradient(180deg,#0E1520,#1B2A3A);
  color: #ffffff;
  border: 1px solid rgba(255,255,255,0.08);
}
#bookingOverlay .btn-primary:hover, #bookingOverlay .btn-secondary:hover {
  transform: translateY(-3px) scale(1.03);
  filter: brightness(1.05);
  box-shadow: 0 6px 18px rgba(0,0,0,0.35);
  transition: transform 250ms ease-out, box-shadow 250ms ease-out, filter 250ms ease-out;
}
#bookingOverlay .btn-primary:active, #bookingOverlay .btn-secondary:active { transform: translateY(1px) scale(0.995); }
#bookingOverlay .btn-primary:focus, #bookingOverlay .btn-secondary:focus { outline: none; box-shadow: 0 0 0 4px rgba(212,175,55,0.22); }

/* Step 1: make Cancel look gold like primary without touching JS */
#bookingOverlay #s1Cancel { background: linear-gradient(180deg,#D4AF37,#E8C766) !important; color: #ffffff !important; border: none !important; box-shadow: 0 6px 18px rgba(212,175,55,0.22) !important; }

/* Reduce perceived vertical stretch by relaxing min-heights from trip.css for this overlay only */
#bookingOverlay .booking-step { min-height: auto; align-items: center; justify-content: flex-start; }

/* Dropdown styling within booking overlay only */
#bookingOverlay select,
#bookingOverlay .profile-select,
#bookingOverlay .profile-dropdown {
  background: linear-gradient(180deg, rgba(10,18,26,0.95), rgba(8,14,20,0.95));
  color: #f1f0e8;
  border: 1px solid rgba(249,214,92,0.09);
  padding: 10px;
  border-radius: 8px;
  -webkit-appearance: none;
  appearance: none;
  background-image: linear-gradient(45deg, transparent 50%, #f9d65c 50%), linear-gradient(135deg, #f9d65c 50%, transparent 50%);
  background-position: calc(100% - 18px) calc(1em + 2px), calc(100% - 13px) calc(1em + 2px);
  background-size: 6px 6px, 6px 6px;
  background-repeat: no-repeat;
  max-width: 720px;
}
#bookingOverlay select:focus, #bookingOverlay .profile-select:focus { box-shadow: 0 0 0 4px rgba(249,214,92,0.08); outline: none; }

/* Titles & Headings inside booking overlay */
#bookingOverlay h2, #bookingOverlay h3 { font-weight: 600; color: #ffffff; line-height: 1.25; }

/* Progress step indicator */
#bookingOverlay .progress-steps {
  font-size: 13px;
  color: #D4AF37;
  text-align: center;
  opacity: 0.9;
  animation: fadeInSoft 300ms ease both;
}

/* Price + Seats layout */
#bookingOverlay .seats-price { display: flex; gap: 10px; align-items: center; justify-content: space-between; width: 100%; }
#bookingOverlay .seats-price .seats-field { flex: 1; }
#bookingOverlay .seats-price .seat-control { display:inline-flex; align-items:center; gap:12px; }
#bookingOverlay .seats-price .price-badge {
  background: linear-gradient(180deg,#b8862a,#f9d65c);
  color: #07222a; padding: 8px 12px; border-radius: 10px; font-weight: 600; margin-left: 6px;
  box-shadow: 0 6px 16px rgba(185,140,40,0.16);
  min-width: 72px; text-align:center;
}

/* Confirmation view seam fix (iOS Safari artifact) */
#bookingOverlay.confirmation-active .overlay-inner,
#bookingOverlay .overlay-inner.confirmation-view,
#bookingOverlay.confirmation-active .booking-confirmation.step-card {
  border: none !important;
  border-right: none !important;
  box-shadow: none !important;
  outline: none !important;
  background-clip: padding-box !important;
}
#bookingOverlay.confirmation-active .overlay-inner::before,
#bookingOverlay.confirmation-active .overlay-inner::after { content: none !important; display: none !important; }

/* Typography & input styling */
#bookingOverlay label { color: #b0b8c2; }
#bookingOverlay .price-badge, #bookingOverlay .price-tag, #bookingOverlay .mini-price {
  color: #D4AF37;
  background: linear-gradient(180deg,#0E1520,#1B2A3A);
  box-shadow: 0 6px 16px rgba(0,0,0,0.35);
}
#bookingOverlay input[type=date],
#bookingOverlay input[type=text],
#bookingOverlay input[type=email],
#bookingOverlay select {
  background: #0E1520;
  border: 1px solid rgba(212,175,55,0.18);
  color: #e6edf4;
  border-radius: 12px;
  padding: 10px 12px;
}
#bookingOverlay input::placeholder,
#bookingOverlay textarea::placeholder { color: rgba(230,237,244,0.55); }
#bookingOverlay input:focus,
#bookingOverlay select:focus,
#bookingOverlay textarea:focus { outline: none; border-color: #D4AF37; box-shadow: 0 0 0 4px rgba(212,175,55,0.16); }

/* Apply smooth entrance to each step container on show */
#bookingOverlay .booking-step { animation: cinematicEntrance 360ms cubic-bezier(.2,.9,.2,1) both; }

/* Mobile layout tweaks */
@media (max-width: 599px) {
  #bookingOverlay .overlay-inner { padding: 12px; min-height: 100vh; }
  /* Avoid vertical over-stretch; give calendar a sensible max-height and center it */
  #bookingOverlay .calendar-full { height: calc(100vh - var(--booking-bar)); min-height: calc(100vh - var(--booking-bar)); overflow: auto; margin-left: auto; margin-right: auto; }
  #bookingOverlay .booking-actions .btn-primary { order: 2; }
  #bookingOverlay .booking-actions .btn-secondary { order: 1; }
  /* reserve space at the bottom so content isn't hidden behind fixed action bar */
  /* add breathing room above fixed bar */
  #bookingOverlay .overlay-inner { padding-bottom: calc(env(safe-area-inset-bottom) + 122px); }
  /* On small screens, keep seats/price cluster centered instead of stretched */
  #bookingOverlay .seats-price { justify-content: center; gap: 16px; }
  #bookingOverlay .seats-price .price-badge { margin-left: 0; }
  /* Avoid stretching form rows edge-to-edge */
  #bookingOverlay .booking-step input,
  #bookingOverlay .booking-step select { max-width: 400px; margin-left: auto; margin-right: auto; }
  #bookingOverlay .booking-step .step-card { width: 90vw; max-width: 500px; }
}

/* Tablet adjustments also reserve bottom space */
@media (min-width: 600px) and (max-width: 1024px) {
  #bookingOverlay .overlay-inner { padding-bottom: calc(env(safe-area-inset-bottom) + 122px); }
}

/* Utility: let buttons flex without overflow on all screens */
#bookingOverlay .booking-actions .btn-primary,
#bookingOverlay .booking-actions .btn-secondary { flex: 1 1 0; min-width: 0; width: auto; }

/* Ensure step cards and headings are centered and spacing is consistent */
#bookingOverlay .booking-step .step-card { margin-left: auto; margin-right: auto; }
#bookingOverlay .booking-step h2 { text-align: center; }
#bookingOverlay .booking-step .step-card > * + * { margin-top: 10px; }

/* Global step card styling inside booking overlay for premium depth */
#bookingOverlay .booking-step .step-card {
  background: linear-gradient(180deg,#0F1B28,#152333); /* ~8% brighter */
  border: 1px solid #223345;
  border-radius: 14px;
  box-shadow: 0 16px 40px rgba(0,0,0,0.5);
}

/* Slightly tighter buttons on very narrow devices */
@media (max-width: 374px) {
  #bookingOverlay .booking-actions .btn-primary,
  #bookingOverlay .booking-actions .btn-secondary { padding: 0 12px; font-size: 15px; min-width: 120px; }
}

/* Desktop/tablet: also ensure enough padding so fixed bar never overlaps */
@media (min-width: 1025px) {
  #bookingOverlay .overlay-inner { padding-bottom: calc(env(safe-area-inset-bottom) + 122px); }
}

/* Step 2: compact, centered, limited width */
#bookingOverlay .step-card.form-narrow { max-width: 420px; margin-left: auto; margin-right: auto; }
#bookingOverlay .step-card.form-narrow label { margin-bottom: 6px; }
#bookingOverlay .step-card.form-narrow > div { margin-top: 4px; margin-bottom: 12px; }
#bookingOverlay .profile-select { max-width: 400px; -webkit-appearance: none; appearance: none; border-radius: 12px; }

/* Step 2: keep content overflow-safe within viewport */
#bookingOverlay #step2.booking-step { min-height: calc(100vh - 140px); align-items: center; justify-content: flex-start; }
#bookingOverlay #step2 .step-card.form-narrow { max-height: calc(100vh - 180px); overflow: auto; }

/* Inputs and selects with faint border/shadow for premium feel */
#bookingOverlay input[type=date],
#bookingOverlay input[type=text],
#bookingOverlay input[type=email],
#bookingOverlay select { box-shadow: 0 6px 16px rgba(0,0,0,0.25); border: 1px solid #223345; }

/* Ensure dropdowns don't overflow viewport width */
#bookingOverlay select { max-width: 100%; }

/* Step 3: confirmation card style and total highlight */
#bookingOverlay .booking-confirmation.step-card {
  background: linear-gradient(180deg,#0F1B28,#152333);
  border: 1px solid #223345; /* faint border */
  border-radius: 14px;
  padding: 16px;
  box-shadow: 0 20px 48px rgba(0,0,0,0.55);
  position: relative;
}
#bookingOverlay .booking-confirmation.step-card::before {
  content: '';
  position: absolute;
  left: 10px; right: 10px; top: 0;
  height: 12px;
  border-radius: 0 0 12px 12px;
  background: linear-gradient(180deg, rgba(255,255,255,0.18), rgba(255,255,255,0));
  pointer-events: none;
}
#bookingOverlay .booking-confirmation.step-card > div:nth-of-type(4) {
  color: #D4AF37; font-weight: 800; font-size: 1.12rem;
}
/* Vertically center confirmation content while leaving room for buttons */
#bookingOverlay #step3.booking-step { min-height: calc(100vh - 140px); display: flex; align-items: center; justify-content: center; }

/* Desktop width constraint for modal */
@media (min-width: 768px) {
  #bookingOverlay .overlay-inner { max-width: 520px; }
}

/* Desktop: center content vertically and horizontally, reduce card padding */
@media (min-width: 900px) {
  #bookingOverlay .overlay-inner { display: flex; align-items: center; justify-content: center; min-height: calc(100vh - var(--booking-bar, 112px)); }
  #bookingOverlay .booking-step .step-card { padding: 12px; }
  #bookingOverlay .booking-step .step-card .price-badge, 
  #bookingOverlay .booking-step .step-card .price-tag, 
  #bookingOverlay .booking-step .step-card .mini-price { box-shadow: 0 4px 14px rgba(0,0,0,0.4); }
}
