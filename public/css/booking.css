/* Booking-specific styles isolated from global theme */

/* Cinematic entrance for overlay content */
@keyframes bookingFadeSlideUp {
  0% { opacity: 0; transform: translateY(10px); }
}

#bookingOverlay {
  background: linear-gradient(180deg, #1B2A3A 0%, #223345 100%) !important;
  min-height: calc(var(--vh, 1vh) * 100);
  width: 100%;
  display: block;
}

/* Ensure booking overlay visually sits above page content; keep footer visible for uniformity */
#bookingOverlay.overlay { z-index: 11000 !important; }
/* Do not hide the footer on calendar anymore; overlay remains above so clicks are safe */
/* #bookingOverlay.active ~ footer { display: none !important; } */

/* Hide non-calendar UI but keep Step 1 containers visible so calendar can render */
/* Keep #step1 and its .calendar-card in the layout; hide other siblings and non-essential elements */
#bookingOverlay .overlay-inner > :not(#step1):not(#step2):not(#step3):not(.calendar-full),
#bookingOverlay .close-overlay,
#bookingOverlay h1,
#bookingOverlay h2,
#bookingOverlay h3,
#bookingOverlay p { display: none !important; visibility: hidden !important; }
/* Keep buttons present and clickable for automation, but invisible to preserve calendar-only look */
#bookingOverlay button,
#bookingOverlay .btn { opacity: 0 !important; pointer-events: auto !important; }

/* Testing mode: when automation is detected, make buttons visible */
body.booking-testing #bookingOverlay button,
body.booking-testing #bookingOverlay .btn { opacity: 1 !important; }

/* Inside step1, hide meta/actions to keep calendar-only view */
#bookingOverlay #step1 .step-meta { display: none !important; visibility: hidden !important; }
/* Step 1 actions: keep in layout but invisible; still clickable by tests */
#bookingOverlay #step1 .booking-actions {
  /* Fixed action bar above the global footer so it's always visible */
  opacity: 1 !important;
  pointer-events: auto !important;
  position: fixed !important;
  left: 0; right: 0;
  bottom: calc(64px + env(safe-area-inset-bottom) + 32px) !important; /* keep some space below the pill */
  display: flex !important;
  justify-content: center !important; /* bring buttons closer to center */
  align-items: center !important;
  padding: 0 20px !important;
  box-sizing: border-box !important;
  gap: 24px !important; /* closer to each other */
  z-index: 2000 !important;
  max-width: 520px !important;
  margin: 0 auto !important; /* center the bar itself */
}
body.booking-testing #bookingOverlay #step1 .booking-actions { opacity: 1 !important; }

/* Override calendar-only hide rule for the real action buttons */
#bookingOverlay #step1 .booking-actions button,
#bookingOverlay #step1 .booking-actions .btn {
  opacity: 1 !important;
}

/* Dark blue pill buttons with white text */
#bookingOverlay #step1 .booking-actions .btn {
  /* Base button visuals centralized in style.css.
     Booking override: slightly larger min-width for visual balance */
  min-width: 120px !important;
}
#bookingOverlay #step1 .booking-actions .btn:hover { background: #122033 !important; box-shadow: 0 12px 22px rgba(0,0,0,0.4), 0 6px 12px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.07), inset 0 -1px 0 rgba(0,0,0,0.3) !important; }
#bookingOverlay #step1 .booking-actions .btn:active { transform: translateY(1px); box-shadow: 0 6px 10px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.05), inset 0 -1px 0 rgba(0,0,0,0.3) !important; }
#bookingOverlay #step1 .booking-actions #s1Cancel { justify-self: flex-start !important; }
#bookingOverlay #step1 .booking-actions #s1Next { justify-self: flex-end !important; }

@media (max-width: 599px) {
  #bookingOverlay #step1 .booking-actions { padding: 0 16px !important; bottom: calc(64px + env(safe-area-inset-bottom) + 34px) !important; max-width: 440px !important; gap: 20px !important; }
  #bookingOverlay #step1 .booking-actions .btn { min-width: 110px !important; padding: 12px 16px !important; }
}

/* Ensure the calendar subtree is visible (do not override internal flatpickr display types) */
#bookingOverlay .overlay-inner,
#bookingOverlay .calendar-full,
#bookingOverlay .flatpickr-calendar { visibility: visible !important; }

/* Reveal only the container and the calendar */
#bookingOverlay .overlay-inner {
  display: block !important;
  visibility: visible !important;
  background: transparent !important;
  width: 100% !important;
  max-width: none !important; /* allow full-bleed width for booking overlay */
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
  border: none !important;
  position: relative !important; /* anchor for absolute calendar */
  transform: none !important; /* prevent translate/scale distortions */
  transition: none !important;
  overflow: visible !important;
}

/* Ensure step1 and the calendar card are visible containers (ancestors of .calendar-full) */
#bookingOverlay #step1,
#bookingOverlay #step1 .calendar-card { display: block !important; visibility: visible !important; background: transparent !important; border: none !important; box-shadow: none !important; margin: 0 !important; padding: 0 !important; }

/* Calendar card positioning baseline */
#bookingOverlay #step1 .calendar-card { position: relative !important; }

/* Trip hero title above the calendar, white bold */
#bookingOverlay #step1 .trip-hero-title {
  position: absolute !important;
  left: 0; right: 0;
  top: calc(var(--calendar-top, 25vh) - 46px) !important;
  text-align: center !important;
  color: #fff !important;
  font-weight: 800 !important;
  font-size: 2rem !important; /* ~x2 */
  margin: 0 !important;
  opacity: 0.96 !important;
  z-index: 6 !important;
  line-height: 1.2 !important;
}
@media (max-width: 599px) {
  #bookingOverlay #step1 .trip-hero-title { font-size: 1.8rem !important; top: calc(var(--calendar-top, 10vh) - 42px) !important; }
}

/* Occupancy x/y indicator just above the bottom action buttons */
#bookingOverlay #step1 .occupancy-indicator {
  position: fixed !important;
  left: 0; right: 0;
  bottom: calc(64px + env(safe-area-inset-bottom) + 110px) !important; /* clearly above the buttons */
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  text-align: center !important;
  color: var(--color-gold, #D4AF37) !important;
  font-weight: 800 !important;
  letter-spacing: 0.02em !important;
  font-size: 1rem !important;
  z-index: 2001 !important; /* above buttons and calendar */
  pointer-events: none !important; /* purely informational */
  text-shadow: 0 1px 2px rgba(0,0,0,0.45) !important;
}
/* pill style for occupancy label */
#bookingOverlay #step1 .occupancy-indicator .occ-pill {
  background: var(--color-logo-bg, #0E1520) !important;
  color: var(--color-gold, #D4AF37) !important;
  padding: 8px 14px !important;
  border-radius: 9999px !important;
  border: 1px solid rgba(255,255,255,0.18) !important; /* a touch brighter for definition */
  box-shadow: 0 6px 14px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06) !important;
  line-height: 1 !important;
}
@media (max-width: 599px) {
  #bookingOverlay #step1 .occupancy-indicator { font-size: 0.98rem !important; bottom: calc(64px + env(safe-area-inset-bottom) + 104px) !important; }
}

/* Desktop: nudge the occupancy pill a bit lower so it doesn't touch the calendar */
@media (min-width: 1024px) {
  #bookingOverlay #step1 .occupancy-indicator { bottom: calc(64px + env(safe-area-inset-bottom) + 88px) !important; }
}

/* Middle band: 60% height, with 25% top empty and 15% bottom empty */
#bookingOverlay .calendar-full {
  display: block !important;
  visibility: visible !important;
  position: absolute !important;
  /* Use a variable for vertical anchor so we can align labels above it */
  --calendar-top: 25vh;
  top: var(--calendar-top);
  left: 50%;
  transform: translateX(-50%);
  width: min(780px, calc(100vw - 56px));
  height: 48vh;
  margin: 0 !important; padding: 0 !important;
  border: none !important; border-radius: 0 !important;
  background: transparent !important; box-shadow: none !important;
  overflow: hidden !important;
}

/* Hide the input itself; render only the inline calendar UI */
#bookingOverlay #calendarFull {
  display: block !important; /* required for flatpickr to attach */
  position: absolute !important;
  width: 0 !important; height: 0 !important;
  opacity: 0 !important; pointer-events: none !important;
  visibility: hidden !important;
}

/* Make the inline flatpickr calendar fill the middle band edge-to-edge */
#bookingOverlay .flatpickr-calendar {
  display: flex !important; /* stack header, weekdays, grid */
  flex-direction: column !important;
  visibility: visible !important;
  position: absolute !important;
  inset: 0 !important;
  width: 100% !important; height: 100% !important;
  background: rgba(40,52,66,0.96) !important; /* distinct dark panel */
  border-radius: 16px !important;
  /* Layered shadow: subtle inner mask + depth without real border (prevents hairlines) */
  /* Grounded (bottom-heavy) shadow */
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.04),
    inset 0 1px 0 rgba(255,255,255,0.03),
    0 14px 30px -10px rgba(0,0,0,0.48),
    0 34px 70px -16px rgba(0,0,0,0.60),
    0 64px 140px -28px rgba(0,0,0,0.56) !important;
  border: none !important;
  box-sizing: border-box !important;
}

/* Persistent calendar-top step indicator */
#bookingOverlay .flatpickr-calendar .cal-step-indicator {
  width: 100%;
  text-align: center;
  padding: 6px 12px;
  color: var(--color-gold, #D4AF37);
  font-weight: 800;
  letter-spacing: 0.02em;
  font-size: 1.05rem;
  opacity: 0.98;
  pointer-events: none;
  /* make sure there is visual separation from the month header */
  margin-top: 2px;
  margin-bottom: 2px;
}
/* when the step indicator exists, push the month header slightly down */
#bookingOverlay .flatpickr-calendar .cal-step-indicator + .flatpickr-months {
  margin-top: 4px !important;
}
@media (max-width: 599px) {
  #bookingOverlay .flatpickr-calendar .cal-step-indicator { padding: 8px 12px 4px; font-size: 0.92rem; margin-bottom: 4px; }
}

/* Header: center month/year exactly between arrows using a 3-column grid */
#bookingOverlay .flatpickr-months {
  display: grid !important;
  grid-template-columns: 40px 1fr 40px !important;
  align-items: center !important;
}
#bookingOverlay .flatpickr-months .flatpickr-prev-month { grid-column: 1 !important; justify-self: center !important; position: static !important; transform: none !important; width: 40px !important; height: 28px !important; display: flex !important; align-items: center !important; justify-content: center !important; }
#bookingOverlay .flatpickr-months .flatpickr-next-month { grid-column: 3 !important; justify-self: center !important; position: static !important; transform: none !important; width: 40px !important; height: 28px !important; display: flex !important; align-items: center !important; justify-content: center !important; }
#bookingOverlay .flatpickr-current-month { grid-column: 2 !important; display: flex !important; justify-content: center !important; align-items: center !important; gap: 6px !important; }

/* Ensure flatpickr internal containers stretch */
#bookingOverlay .flatpickr-innerContainer,
#bookingOverlay .flatpickr-rContainer { display: flex !important; flex-direction: column !important; width: 100% !important; height: 100% !important; }
#bookingOverlay .flatpickr-rContainer { flex: 1 1 auto !important; }
#bookingOverlay .flatpickr-weekdays { flex: 0 0 auto !important; width: 100% !important; }

/* Calendar header and weekdays spacing */
#bookingOverlay .flatpickr-months { padding: 6px 6px !important; }
#bookingOverlay .flatpickr-weekdays {
  /* Make weekday bar use the same horizontal padding as the days grid */
  padding: 6px var(--cal-pad-x) !important;
  box-sizing: border-box !important;
}
/* Align weekday labels to day columns: use 7-col grid with same gaps/padding as days */
#bookingOverlay .flatpickr-weekdaycontainer {
  /* Use identical 7-column grid as days with content-clamping tracks to avoid overflow */
  display: grid !important;
  grid-template-columns: repeat(7, minmax(0, 1fr)) !important;
  gap: 8px !important; /* shorthand to match days gap exactly */
  box-sizing: border-box !important; /* include paddings in width calc */
}
#bookingOverlay .flatpickr-weekday {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  text-align: center !important;
}

/* Make the day grid fill the remaining height evenly */
#bookingOverlay .flatpickr-days {
  /* Size by content (square cells) and sit just under the weekdays */
  flex: 0 0 auto !important;
  padding: 8px var(--cal-pad-x) 12px !important; /* tighter top, match weekday padding */
  box-sizing: border-box !important;
  width: 100% !important;
  height: auto !important;
  margin-top: 4px !important; /* reduce empty gap */
  margin-bottom: 0 !important;
  overflow: hidden !important;
  display: block !important;
}
#bookingOverlay .flatpickr-days .dayContainer:not([aria-hidden="true"]) {
  display: grid !important;
  /* Mirror weekdays grid definition exactly to keep perfect vertical alignment */
  grid-template-columns: repeat(7, minmax(0, 1fr)) !important;
  /* Let rows size by content (square .flatpickr-day) */
  grid-auto-rows: auto !important;
  gap: 8px !important;
  height: auto !important;
  width: 100% !important;
  min-width: 0 !important;
  max-width: none !important;
  float: none !important;
}

/* Do not render offscreen/animating month containers; prevents large top gaps */
#bookingOverlay .flatpickr-days .dayContainer[aria-hidden="true"] {
  display: none !important;
}

/* Improve day visibility: bold, slightly larger, and a thin white border */
#bookingOverlay .flatpickr-day {
  width: 100% !important;
  height: auto !important;
  aspect-ratio: 1 / 1 !important; /* make cells square based on column width */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-weight: 600 !important;
  font-size: 1rem !important;
  border: 1px solid rgba(255,255,255,0.18) !important;
  border-radius: 10px !important;
  box-sizing: border-box !important;
  /* Remove Flatpickr's default caps that lock width/height ~39px */
  max-width: none !important;
  max-height: none !important;
  line-height: 1.1 !important;
  margin: 0 !important;
  padding: 0 !important;
}
#bookingOverlay .flatpickr-day:hover { border-color: rgba(255,255,255,0.28) !important; }
#bookingOverlay .flatpickr-weekday { font-weight: 600 !important; opacity: 0.9 !important; }
#bookingOverlay .flatpickr-months .flatpickr-month { font-weight: 700 !important; }

/* Mobile: make the calendar fill 70–80% height with some bottom padding for future buttons */
@media (max-width: 599px) {
  /* Remove global overlay side padding only for booking to avoid full-height vertical columns */
  #bookingOverlay.overlay { padding-left: 0 !important; padding-right: 0 !important; }
  #bookingOverlay .overlay-inner { padding-bottom: calc(12vh + env(safe-area-inset-bottom)) !important; }
  #bookingOverlay .calendar-full {
    height: calc(var(--vh, 1vh) * 78); /* 70–80% band for calendar */
    --calendar-top: calc((calc(var(--vh, 1vh) * 100) - calc(var(--vh, 1vh) * 78)) / 2);
    top: var(--calendar-top); /* centered vertically */
    /* Equal side insets for perfect centering */
    left: max(16px, env(safe-area-inset-left));
    right: max(16px, env(safe-area-inset-right));
    width: auto;
    margin: 0;
    transform: none;
    max-width: 540px; /* προληπτικό όριο για μεγάλα κινητά/tablets σε portrait */
    overflow: visible !important;
  }
  #bookingOverlay .flatpickr-calendar {
    max-width: none !important;
    /* Slightly softer grounded profile on mobile */
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,0.03),
      inset 0 1px 0 rgba(255,255,255,0.025),
      0 12px 26px -10px rgba(0,0,0,0.46),
      0 30px 72px -18px rgba(0,0,0,0.62),
      0 58px 128px -30px rgba(0,0,0,0.56) !important;
  }
  #bookingOverlay .flatpickr-months { padding: 0 8px 6px !important; }
  #bookingOverlay .flatpickr-weekdays { padding: 8px var(--cal-pad-x) !important; }
  #bookingOverlay .flatpickr-weekdaycontainer { column-gap: var(--cal-gap) !important; }
  #bookingOverlay .flatpickr-months .flatpickr-prev-month,
  #bookingOverlay .flatpickr-months .flatpickr-next-month { flex: 0 0 36px !important; width: 36px !important; margin-top: -6px !important; }
  #bookingOverlay .flatpickr-current-month { margin-top: -6px !important; }
  #bookingOverlay .flatpickr-current-month .cur-month { font-size: 1rem !important; background: transparent !important; }
  #bookingOverlay .flatpickr-current-month .numInputWrapper { width: 58px !important; }
  #bookingOverlay .flatpickr-days { padding: 6px var(--cal-pad-x) 10px !important; margin-top: 2px !important; }
  #bookingOverlay .flatpickr-days .dayContainer { gap: var(--cal-gap) !important; }
  #bookingOverlay .flatpickr-day { font-size: 0.96rem !important; border-radius: 8px !important; }
  #bookingOverlay .flatpickr-weekday { font-size: 0.9rem !important; font-weight: 700 !important; padding: 4px 0 !important; }
  #bookingOverlay .flatpickr-months .flatpickr-month { font-size: 1rem !important; }
  /* Remove any residual background from month/year widgets that creates a center pill */
  #bookingOverlay .flatpickr-current-month,
  #bookingOverlay .flatpickr-current-month .cur-month,
  #bookingOverlay .flatpickr-current-month .numInputWrapper,
  #bookingOverlay .flatpickr-current-month input { background: transparent !important; }
}

/* Desktop/Large screens: κάνε τα κελιά λίγο μικρότερα μειώνοντας το ύψος και τα κενά */
@media (min-width: 600px) {
  #bookingOverlay .calendar-full { height: 42vh; width: min(720px, calc(100vw - 72px)); }
  #bookingOverlay .flatpickr-days .dayContainer { gap: 3px !important; }
  #bookingOverlay .flatpickr-weekdaycontainer { column-gap: 3px !important; }
  #bookingOverlay .flatpickr-day { font-size: 0.84rem !important; border-radius: 8px !important; }
}

/* Desktop refinements (do not affect mobile) */
@media (min-width: 1024px) {
  /* Desktop: mid-size calendar sizing by width; height auto */
  #bookingOverlay .calendar-full { width: clamp(480px, 42vw, 560px); height: auto; overflow: visible !important; }
  #bookingOverlay .flatpickr-calendar { position: static !important; inset: auto !important; }
  /* Remove top glossy highlight by simplifying the shadow stack on desktop */
  #bookingOverlay .flatpickr-calendar {
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,0.03),
      /* removed inner top highlight */
      0 14px 30px -10px rgba(0,0,0,0.48),
      0 34px 70px -16px rgba(0,0,0,0.60),
      0 64px 140px -28px rgba(0,0,0,0.56) !important;
  }
  #bookingOverlay .flatpickr-days .dayContainer { gap: 5px !important; }
  #bookingOverlay .flatpickr-day { font-size: 0.88rem !important; border-radius: 8px !important; }

  /* Header: nudge group a bit upward inside the bar for neutral balance */
  #bookingOverlay .flatpickr-months .flatpickr-prev-month,
  #bookingOverlay .flatpickr-months .flatpickr-next-month { margin-top: -4px !important; }
  #bookingOverlay .flatpickr-current-month { margin-top: -4px !important; }

  /* Make sure prev/next arrows render visibly and are clickable */
  #bookingOverlay .flatpickr-months .flatpickr-prev-month,
  #bookingOverlay .flatpickr-months .flatpickr-next-month {
    visibility: visible !important;
    opacity: 1 !important;
    color: #e6eef6 !important;
    font-size: 18px !important;
    width: 40px !important;
    height: 28px !important;
    z-index: 2 !important;
    pointer-events: auto !important;
    justify-self: center !important;
    align-self: center !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
  #bookingOverlay .flatpickr-months .flatpickr-prev-month svg,
  #bookingOverlay .flatpickr-months .flatpickr-next-month svg {
    display: block !important;
    width: 16px !important;
    height: 16px !important;
    fill: currentColor !important;
    stroke: currentColor !important;
    opacity: 1 !important;
  }
  /* Fallback: use text chevrons if SVGs are suppressed or not rendering */
  #bookingOverlay .flatpickr-months .flatpickr-prev-month::before { content: none !important; }
  #bookingOverlay .flatpickr-months .flatpickr-next-month::before { content: none !important; }
  /* Avoid double icons: hide SVG if both appear */
  /* ensure SVGs remain visible */
  /* (no hide rule) */

  /* Strip backgrounds/shadows from the header container to avoid glossy/pill look */
  #bookingOverlay .flatpickr-months,
  #bookingOverlay .flatpickr-months .flatpickr-month {
    background: transparent !important;
    background-image: none !important;
    box-shadow: none !important;
    border: none !important;
  }
  /* Make the year value (e.g., 2025) bold in the calendar header */
  #bookingOverlay .flatpickr-current-month .cur-year,
  #bookingOverlay .flatpickr-current-month input.cur-year {
    font-weight: 800 !important;
  }

  /* Reinforce bold year across all devices/breakpoints (higher specificity + variable font hint) */
  #bookingOverlay .flatpickr-current-month .numInputWrapper input.cur-year,
  #bookingOverlay .flatpickr-current-month .numInputWrapper .cur-year,
  #bookingOverlay .flatpickr-current-month input.cur-year {
    font-weight: 800 !important;
    font-variation-settings: 'wght' 800 !important;
  }
  /* Remove default dropdown styling (or hide it) which creates a pill */
  #bookingOverlay select.flatpickr-monthDropdown-months {
    appearance: none !important;
    -webkit-appearance: none !important;
    background: transparent !important;
    background-image: none !important;
    border: none !important;
    box-shadow: none !important;
    color: #e6eef6 !important;
    padding: 0 4px !important;
    margin: 0 !important;
    outline: none !important;
    opacity: 1 !important;
    pointer-events: auto !important;
    position: static !important;
    width: auto !important;
    height: auto !important;
  }
  /* Ensure arrows are visible and centered */
  #bookingOverlay .flatpickr-months .flatpickr-prev-month,
  #bookingOverlay .flatpickr-months .flatpickr-next-month {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    color: rgba(255,255,255,0.9) !important;
    opacity: 0.95 !important;
  }
  #bookingOverlay .flatpickr-months .flatpickr-prev-month svg,
  #bookingOverlay .flatpickr-months .flatpickr-next-month svg {
    width: 16px !important;
    height: 16px !important;
    fill: currentColor !important;
    stroke: currentColor !important;
  }
  /* Allow interactions with static month label if used */
  #bookingOverlay .flatpickr-current-month .cur-month { pointer-events: auto !important; color: #e6eef6 !important; }
  /* Avoid tap/hover highlight on the month label */
  #bookingOverlay .flatpickr-months, #bookingOverlay .flatpickr-months * { -webkit-tap-highlight-color: transparent !important; }

  /* Reset to stable header grid: arrows at sides, month centered */
  #bookingOverlay .flatpickr-months { display: grid !important; grid-template-columns: 40px 1fr 40px !important; align-items: center !important; }
  #bookingOverlay .flatpickr-months .flatpickr-prev-month { grid-column: 1 !important; justify-self: center !important; }
  #bookingOverlay .flatpickr-months .flatpickr-next-month { grid-column: 3 !important; justify-self: center !important; }
  #bookingOverlay .flatpickr-current-month { grid-column: 2 !important; display: flex !important; justify-content: center !important; align-items: center !important; gap: 6px !important; color: #e6eef6 !important; }

  /* Place arrows next to the month label in the center column (not near the year) */
  #bookingOverlay .flatpickr-months { grid-template-columns: 0 1fr 0 !important; }
  #bookingOverlay .flatpickr-current-month { grid-column: 2 !important; }
  #bookingOverlay .flatpickr-months .flatpickr-prev-month { grid-column: 2 !important; justify-self: start !important; margin: 0 8px 0 0 !important; }
  #bookingOverlay .flatpickr-months .flatpickr-next-month { grid-column: 2 !important; justify-self: end !important; margin: 0 0 0 8px !important; }
  /* Nuclear reset on month header internals to remove any residual pill/gloss */
  #bookingOverlay .flatpickr-current-month,
  #bookingOverlay .flatpickr-current-month *,
  #bookingOverlay .flatpickr-months .flatpickr-month,
  #bookingOverlay .flatpickr-months .flatpickr-month * {
    background: transparent !important;
    background-image: none !important;
    box-shadow: none !important;
    border: none !important;
    filter: none !important;
    text-shadow: none !important;
    -webkit-appearance: none !important;
    appearance: none !important;
  }
  #bookingOverlay .flatpickr-current-month::before,
  #bookingOverlay .flatpickr-current-month::after,
  #bookingOverlay .flatpickr-months .flatpickr-month::before,
  #bookingOverlay .flatpickr-months .flatpickr-month::after { content: none !important; display: none !important; }

  /* Weekdays: keep alignment but shrink width via padding/gap */
  #bookingOverlay .flatpickr-weekdays { padding: 12px 16px !important; }
  #bookingOverlay .flatpickr-weekdaycontainer { column-gap: 5px !important; }
  #bookingOverlay .flatpickr-weekday { font-size: 0.96rem !important; font-weight: 700 !important; letter-spacing: 0.02em !important; }

  /* Remove any pill/background from month/year group (e.g., behind "Οκτώβριος 2025") */
  #bookingOverlay .flatpickr-current-month,
  #bookingOverlay .flatpickr-current-month .cur-month,
  #bookingOverlay .flatpickr-current-month .numInputWrapper,
  #bookingOverlay .flatpickr-current-month input {
    background: transparent !important;
    background-image: none !important;
    box-shadow: none !important;
    border: none !important;
    border-radius: 0 !important;
    outline: none !important;
  }
  /* Tight reset on the month label itself: remove any padding/radius and pseudo elements */
  #bookingOverlay .flatpickr-months .flatpickr-month .cur-month {
    padding: 0 !important;
    margin: 0 !important;
    border-radius: 0 !important;
    user-select: none !important;
    -webkit-appearance: none !important;
    appearance: none !important;
  }
  #bookingOverlay .flatpickr-months .flatpickr-month .cur-month::before,
  #bookingOverlay .flatpickr-months .flatpickr-month .cur-month::after { content: none !important; display: none !important; }
  /* Also remove on hover/focus/active to prevent theme from re-applying gloss */
  #bookingOverlay .flatpickr-current-month .cur-month:hover,
  #bookingOverlay .flatpickr-current-month .cur-month:focus,
  #bookingOverlay .flatpickr-current-month .cur-month:active,
  #bookingOverlay .flatpickr-current-month input:hover,
  #bookingOverlay .flatpickr-current-month input:focus,
  #bookingOverlay .flatpickr-current-month input:active,
  #bookingOverlay .flatpickr-current-month .numInputWrapper:hover,
  #bookingOverlay .flatpickr-current-month .numInputWrapper:focus,
  #bookingOverlay .flatpickr-current-month .numInputWrapper:active {
    background: transparent !important;
    box-shadow: none !important;
    border: none !important;
    outline: none !important;
  }
  /* Optional: disable pointer interactions on the month label to avoid hover styling */
  #bookingOverlay .flatpickr-current-month .cur-month { pointer-events: auto !important; }

  /* Size days by content; restore true square cells */
  #bookingOverlay .flatpickr-days { flex: 0 0 auto !important; padding: 8px 12px 12px !important; }
  #bookingOverlay .flatpickr-days .dayContainer { width: 100% !important; height: auto !important; aspect-ratio: auto !important; grid-template-rows: none !important; grid-auto-rows: auto !important; }
  #bookingOverlay .flatpickr-day { height: auto !important; aspect-ratio: 1 / 1 !important; }

  /* Hide year input up/down spinner arrows (cause of wrong arrows by the year) */
  #bookingOverlay .flatpickr-current-month input[type=number]::-webkit-outer-spin-button,
  #bookingOverlay .flatpickr-current-month input[type=number]::-webkit-inner-spin-button { -webkit-appearance: none !important; margin: 0 !important; }
  #bookingOverlay .flatpickr-current-month input[type=number] { -moz-appearance: textfield !important; appearance: textfield !important; }

  /* Ensure month navigation SVG chevrons are always visible (no fallback text chevrons) */
  #bookingOverlay .flatpickr-months .flatpickr-prev-month::before,
  #bookingOverlay .flatpickr-months .flatpickr-next-month::before { content: none !important; }
  #bookingOverlay .flatpickr-months .flatpickr-prev-month svg,
  #bookingOverlay .flatpickr-months .flatpickr-next-month svg { display: inline-block !important; width: 16px !important; height: 16px !important; fill: currentColor !important; stroke: currentColor !important; }
  #bookingOverlay .flatpickr-months .flatpickr-prev-month,
  #bookingOverlay .flatpickr-months .flatpickr-next-month { opacity: 1 !important; visibility: visible !important; color: #e6eef6 !important; }

  /* Prevent year from being interactive (so arrows won't change the year) */
  #bookingOverlay .flatpickr-current-month .numInputWrapper { pointer-events: none !important; background: transparent !important; box-shadow: none !important; border: none !important; }
  #bookingOverlay .flatpickr-current-month input.cur-year { pointer-events: none !important; background: transparent !important; box-shadow: none !important; border: none !important; -moz-appearance: textfield !important; appearance: textfield !important; }
  #bookingOverlay .flatpickr-current-month .numInputWrapper::before,
  #bookingOverlay .flatpickr-current-month .numInputWrapper::after { content: none !important; display: none !important; }
}

/* Footer is globally styled in style.css; avoid sizing overrides here */

/* Desktop fixes: restore header layout and prevent bottom clipping */
@media (min-width: 1024px) {
  /* Allow content to extend and avoid clipping of last row at rounded corner */
  #bookingOverlay .calendar-full { overflow: visible !important; height: auto !important; }
  #bookingOverlay .flatpickr-calendar { padding-bottom: 12px !important; }
  #bookingOverlay .flatpickr-days { padding-bottom: 16px !important; padding-left: 16px !important; padding-right: 16px !important; }
  #bookingOverlay .flatpickr-days .dayContainer { gap: 5px !important; }

  /* Stable header: arrows at sides, month centered */
  #bookingOverlay .flatpickr-months { display: grid !important; grid-template-columns: 40px 1fr 40px !important; align-items: center !important; }
  #bookingOverlay .flatpickr-months .flatpickr-prev-month { grid-column: 1 !important; justify-self: center !important; }
  #bookingOverlay .flatpickr-months .flatpickr-next-month { grid-column: 3 !important; justify-self: center !important; }
  #bookingOverlay .flatpickr-current-month { grid-column: 2 !important; display: flex !important; justify-content: center !important; align-items: center !important; gap: 6px !important; color: #e6eef6 !important; }
  #bookingOverlay select.flatpickr-monthDropdown-months { display: inline-block !important; min-width: 110px !important; text-align: center !important; opacity: 1 !important; pointer-events: auto !important; }
}

/* =====================================================
   Final alignment guard: unify gaps and side paddings 
   across weekdays and days using CSS variables so the
   7 columns never overflow (all devices)
   ===================================================== */
#bookingOverlay .flatpickr-calendar { --cal-gap: 6px; --cal-pad-x: 16px; }
#bookingOverlay .flatpickr-weekdays { padding: 12px var(--cal-pad-x) !important; }
#bookingOverlay .flatpickr-weekdaycontainer { column-gap: var(--cal-gap) !important; }
#bookingOverlay .flatpickr-days { padding: 8px var(--cal-pad-x) 14px !important; }
#bookingOverlay .flatpickr-days .dayContainer { gap: var(--cal-gap) !important; }

/* Mobile */
@media (max-width: 599px) {
  #bookingOverlay .flatpickr-calendar { --cal-gap: 4px; --cal-pad-x: 18px; }
}

/* Small/medium screens */
@media (min-width: 600px) and (max-width: 1023px) {
  /* Nudge month header slightly upward for better centering inside the calendar */
  #bookingOverlay .flatpickr-months { margin-top: -14px !important; }
  #bookingOverlay .flatpickr-current-month { margin-top: -8px !important; }
  #bookingOverlay .flatpickr-calendar { --cal-gap: 5px; --cal-pad-x: 18px; }
}

/* Tablet/iPad fixes: prevent calendar clipping on Step 1 (iPad & iPad mini) */
@media (min-width: 600px) and (max-width: 1023px) {
  /* Lock overlay to viewport ONLY during Step 1 to prevent vertical scrolling */
  #bookingOverlay.step1-active { position: fixed !important; inset: 0 !important; overflow: hidden !important; overscroll-behavior: none !important; }
  #bookingOverlay.step1-active .overlay-inner { height: calc(var(--vh, 1vh) * 100) !important; overflow: hidden !important; touch-action: pan-x !important; }

  /* Make step1 a flex column so we can order blocks without touching DOM */
  #bookingOverlay #step1 { display: flex !important; flex-direction: column !important; align-items: center !important; gap: 6px !important; padding-top: 16px !important; padding-bottom: calc(140px + env(safe-area-inset-bottom)) !important; position: relative !important; }
  /* Reorder: availability (1), title (2), calendar (3) */
  #bookingOverlay #availabilityBlock { order: 1 !important; }
  #bookingOverlay #step1 .trip-hero-title { order: 2 !important; }
  #bookingOverlay #step1 .calendar-card { order: 3; }

  /* Slightly adjust occupancy pill so it sits comfortably above the buttons */
  #bookingOverlay #step1 .occupancy-indicator { bottom: calc(64px + env(safe-area-inset-bottom) + 102px) !important; }
  /* Title should sit above the calendar in normal flow (no overlap) */
  #bookingOverlay #step1 .trip-hero-title {
    position: static !important;
    margin: 42px auto 14px !important; /* +2 clicks +3 more clicks lower */
    text-align: center !important;
    z-index: 6 !important; /* above card shadow if needed */
  }
  /* Availability presentation: keep it compact and visible above title */
  #bookingOverlay #availabilityBlock {
    width: min(760px, calc(100vw - 56px));
    position: absolute !important; /* remove from flow so calendar doesn't shift */
    top: 2px !important; /* one click lower than before */
    left: 50% !important; transform: translateX(-50%) !important;
    margin: 0 !important;
    z-index: 7001 !important; /* above footer and shadows */
    pointer-events: none !important; /* avoid blocking taps */
  }
  /* Let the calendar sit in normal flow so it can't be clipped by viewport */
  #bookingOverlay .calendar-full {
    position: static !important;
    top: auto !important;
    left: auto !important;
    right: auto !important;
    transform: none !important;
    width: min(700px, calc(100vw - 56px)) !important; /* slimmer on tablets */
    height: auto !important;
    margin: 0 auto 32vh !important; /* extra bottom breathing room so it never rides over buttons */
    overflow: visible !important;
  }
  /* Slim down gaps/padding inside the calendar for tablets */
  #bookingOverlay .flatpickr-calendar { --cal-gap: 3px !important; --cal-pad-x: 14px !important; }
  #bookingOverlay .flatpickr-weekdays { padding: 8px var(--cal-pad-x) !important; }
  /* Slightly smaller typography to reinforce the smaller calendar */
  #bookingOverlay #step1 .flatpickr-day { font-size: 0.94rem !important; }
  #bookingOverlay #step1 .flatpickr-weekday { font-size: 0.92rem !important; }
  /* Keep the action buttons above any content */
  #bookingOverlay #step1 .booking-actions { z-index: 9001 !important; }
  /* Mirror desktop behavior so absolute fill doesn’t require fixed height */
  #bookingOverlay .flatpickr-calendar { position: static !important; inset: auto !important; padding-bottom: 26px !important; overflow: visible !important; }
  /* Allow inner content to extend past rounded corner and ensure last row breathes */
  #bookingOverlay .flatpickr-days { overflow: visible !important; padding-bottom: 40px !important; }
}

/* iPad landscape (touch devices around 1024px): apply same tablet-safe layout without touching desktops */
@media (min-width: 1024px) and (max-width: 1180px) and (hover: none) and (pointer: coarse) {
  /* iPad touch: nudge header a touch more */
  #bookingOverlay .flatpickr-months { margin-top: -16px !important; }
  #bookingOverlay .flatpickr-current-month { margin-top: -9px !important; }
  /* Lock overlay to viewport ONLY during Step 1 on iPad touch */
  #bookingOverlay.step1-active { position: fixed !important; inset: 0 !important; overflow: hidden !important; overscroll-behavior: none !important; }
  #bookingOverlay.step1-active .overlay-inner { height: calc(var(--vh, 1vh) * 100) !important; overflow: hidden !important; touch-action: pan-x !important; }

  #bookingOverlay #step1 { display: flex !important; flex-direction: column !important; align-items: center !important; gap: 6px !important; padding-top: 16px !important; padding-bottom: calc(140px + env(safe-area-inset-bottom)) !important; position: relative !important; }
  /* Reorder: availability (1), title (2), calendar (3) */
  #bookingOverlay #availabilityBlock { order: 1 !important; }
  #bookingOverlay #step1 .trip-hero-title { order: 2 !important; }
  #bookingOverlay #step1 .calendar-card { order: 3; }
  #bookingOverlay #step1 .occupancy-indicator { bottom: calc(64px + env(safe-area-inset-bottom) + 102px) !important; }
  #bookingOverlay #step1 .trip-hero-title {
    position: static !important;
    margin: 42px auto 14px !important; /* +2 clicks +3 more clicks lower */
    text-align: center !important;
    z-index: 6 !important;
  }
  #bookingOverlay #availabilityBlock {
    width: min(780px, calc(100vw - 64px));
    position: absolute !important; /* remove from flow so calendar doesn't shift */
    top: 4px !important; /* one click lower than before */
    left: 50% !important; transform: translateX(-50%) !important;
    margin: 0 !important;
    z-index: 7001 !important;
    pointer-events: none !important; /* avoid blocking taps */
  }
  #bookingOverlay .calendar-full {
    position: static !important;
    top: auto !important; left: auto !important; right: auto !important;
    transform: none !important;
    width: min(720px, calc(100vw - 64px)) !important; /* slimmer on iPad landscape */
    height: auto !important;
    margin: 0 auto 32vh !important; /* extra bottom breathing room */
    overflow: visible !important;
  }
  #bookingOverlay .flatpickr-calendar { --cal-gap: 3px !important; --cal-pad-x: 14px !important; }
  #bookingOverlay .flatpickr-weekdays { padding: 8px var(--cal-pad-x) !important; }
  #bookingOverlay #step1 .flatpickr-day { font-size: 0.94rem !important; }
  #bookingOverlay #step1 .flatpickr-weekday { font-size: 0.92rem !important; }
  #bookingOverlay #step1 .booking-actions { z-index: 9001 !important; }
  #bookingOverlay .flatpickr-calendar { position: static !important; inset: auto !important; padding-bottom: 26px !important; overflow: visible !important; }
  #bookingOverlay .flatpickr-days { overflow: visible !important; padding-bottom: 38px !important; }
}

/* Desktop/Large screens */
@media (min-width: 1024px) {
  #bookingOverlay .flatpickr-calendar { --cal-gap: 7px; --cal-pad-x: 20px; }
}

/* Desktop only (mouse/hover devices): keep availability above the trip title, centered */
@media (min-width: 1024px) and (hover: hover) and (pointer: fine) {
  #bookingOverlay #availabilityBlock {
    position: absolute !important;
    /* Place just above the title which sits at: calc(var(--calendar-top) - 46px) */
    top: calc(var(--calendar-top, 25vh) - 84px) !important; /* 3 clicks (~6px) higher */
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: clamp(420px, 48vw, 640px) !important;
    margin: 0 !important;
    z-index: 7001 !important;
    pointer-events: none !important; /* avoid blocking interactions */
  }
}

/* =============================================
   Final enforcement: Bold year across devices
   ============================================= */
#bookingOverlay .flatpickr-current-month .numInputWrapper input.cur-year,
#bookingOverlay .flatpickr-current-month input.cur-year,
#bookingOverlay .flatpickr-current-month .cur-year,
#bookingOverlay .flatpickr-months .flatpickr-month .cur-year {
  font-weight: 800 !important;
  font-variation-settings: 'wght' 800 !important;
}

/* =============================================
   Global: remove any grey "windows" (backgrounds)
   from month header and weekday labels (all devices)
   ============================================= */
#bookingOverlay .flatpickr-months,
#bookingOverlay .flatpickr-months .flatpickr-month,
#bookingOverlay .flatpickr-current-month,
#bookingOverlay .flatpickr-current-month .cur-month,
#bookingOverlay .flatpickr-current-month .numInputWrapper,
#bookingOverlay .flatpickr-current-month input,
#bookingOverlay .flatpickr-weekdays,
#bookingOverlay .flatpickr-weekdaycontainer,
#bookingOverlay .flatpickr-weekday {
  background: transparent !important;
  background-image: none !important;
  box-shadow: none !important;
  border: none !important;
}
#bookingOverlay .flatpickr-current-month::before,
#bookingOverlay .flatpickr-current-month::after,
#bookingOverlay .flatpickr-months .flatpickr-month::before,
#bookingOverlay .flatpickr-months .flatpickr-month::after,
#bookingOverlay .flatpickr-current-month .cur-month::before,
#bookingOverlay .flatpickr-current-month .cur-month::after {
  content: none !important;
  display: none !important;
}
#bookingOverlay .flatpickr-current-month .cur-month,
#bookingOverlay .flatpickr-current-month input,
#bookingOverlay .flatpickr-current-month .numInputWrapper {
  border-radius: 0 !important;
  outline: none !important;
}

/* =============================================
   Global contrast bump: brighter white labels
   ============================================= */
#bookingOverlay .flatpickr-current-month,
#bookingOverlay .flatpickr-current-month .cur-month,
#bookingOverlay .flatpickr-current-month .cur-year,
#bookingOverlay .flatpickr-current-month input.cur-year {
  color: #ffffff !important;
  text-shadow: 0 1px 1px rgba(0,0,0,0.18) !important;
}
#bookingOverlay .flatpickr-weekday {
  color: #ffffff !important;
  text-shadow: 0 1px 1px rgba(0,0,0,0.18) !important;
}

  /* ===============================
     Light Mode: Booking Overlay
     ===============================
     Keep changes scoped to system light preference and avoid altering
     dark mode visuals. Turn booking overlay into a light surface with
     dark navy text and subtle shadow for depth.
  */
  @media (prefers-color-scheme: light) {
    /* Light backdrop for the full-screen overlay */
  #bookingOverlay.overlay { background: #FFF9EB !important; }

    /* Light panel for any inner container that is visible on booking */
    #bookingOverlay .overlay-inner {
      background: #FFF9EB !important;
      color: #1B2A3A !important;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08) !important;
      border: 1px solid rgba(0,0,0,0.04) !important;
      transition: background 0.4s ease-in-out, color 0.4s ease-in-out, box-shadow 0.4s ease-in-out !important;
    }

    /* Trip hero title: switch from white to dark navy for readability on light bg */
    #bookingOverlay #step1 .trip-hero-title { color: #1B2A3A !important; text-shadow: none !important; }

    /* Keep month names/labels and day numbers white as in dark mode */
    #bookingOverlay .flatpickr-current-month,
    #bookingOverlay .flatpickr-current-month .cur-month,
    #bookingOverlay .flatpickr-current-month .cur-year,
    #bookingOverlay .flatpickr-weekday,
    #bookingOverlay .flatpickr-day { color: #ffffff !important; text-shadow: 0 1px 1px rgba(0,0,0,0.18) !important; }

    /* Normal content text inside booking: adopt token + slight weight bump */
    #bookingOverlay :is(p, li, small, label, em, strong, span) {
      color: var(--ga-text) !important;
      font-weight: 600;
    }
  }
