/* Minimal scoped styles for the Availability panel; keep overrides light */
.admin-availability .sticky-bar{position:sticky;top:0;background:#0a121c;color:#fff;padding:10px;border-bottom:1px solid rgba(255,255,255,0.08);z-index:20}
.admin-availability .admin-row{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
.admin-availability .admin-row.filters label{color:#ddd}
.admin-availability .admin-row label{display:flex;gap:6px;align-items:center}
.admin-availability .admin-row input[type="text"],
.admin-availability .admin-row input[type="date"],
.admin-availability .admin-row input[type="time"]{padding:6px;border:1px solid #334;border-radius:6px;background:#0e1722;color:#fff}
.admin-availability .btn{background:#113244;color:#fff;border:1px solid rgba(255,255,255,0.12);padding:8px 10px;border-radius:8px;cursor:pointer}
.admin-availability .btn.primary{background:#0a7}
.admin-availability .btn.danger{background:#b23b3b}
.admin-availability .btn:disabled{opacity:0.6;cursor:default}

.admin-availability #availabilityContainer{padding:10px}
.admin-availability table.grid{width:100%;border-collapse:collapse;background:#0c1520;color:#eee}
.admin-availability table.grid th, .admin-availability table.grid td{border-bottom:1px solid rgba(255,255,255,0.06);padding:8px;text-align:left}
.admin-availability table.grid thead th{position:sticky;top:var(--availability-sticky-offset,56px);background:#0a121c;z-index:5}
.admin-availability td .actions{display:flex;gap:6px}
.admin-availability .hint{margin-top:8px;color:#9ab}

/* Activity dot */
.admin-availability .dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px}
.admin-availability .dot.green{background:#27d17f}
.admin-availability .dot.yellow{background:#ffd95a}
.admin-availability .dot.red{background:#ff6b6b}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center}
.modal-dialog{width:min(640px,94vw);background:#0c1520;border:1px solid rgba(255,255,255,0.08);border-radius:12px;box-shadow:0 12px 38px rgba(0,0,0,0.45);overflow:hidden}
.modal-header,.modal-footer{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:#0a121c;border-bottom:1px solid rgba(255,255,255,0.06)}
.modal-footer{border-top:1px solid rgba(255,255,255,0.06);border-bottom:0}
.modal-header h4{margin:0;color:#fff}
.modal-body{padding:12px}
.modal .form-row{display:flex;flex-direction:column;gap:6px;margin-bottom:10px}
.modal .form-row.two{flex-direction:row}
.modal .form-row.two label{flex:1}
.modal input, .modal textarea{padding:8px;border:1px solid #334;border-radius:8px;background:#0e1722;color:#fff}
.modal .icon{background:transparent;color:#eee;border:0;cursor:pointer;font-size:16px}

/* Responsive tweaks */
@media (max-width: 720px){
  /* Prevent whole-page horizontal panning; we will allow only the table area to scroll horizontally */
  body.admin-availability{overflow-x:hidden}

  /* Keep the sticky bar fully spanning the viewport on mobile */
  .admin-availability .sticky-bar{left:0;right:0;z-index:120}

  .admin-availability .admin-row.filters label{flex:1 1 48%}

  /* Make the table horizontally scrollable like a carousel, without affecting desktop/tablet */
  .admin-availability #availabilityContainer{position:relative;overflow-x:auto;overflow-y:visible;-webkit-overflow-scrolling:touch;overscroll-behavior-x:contain}
  /* Ensure table can extend wider than viewport on phones */
  .admin-availability table.grid{min-width:920px; table-layout:fixed; border-collapse:separate; border-spacing:0; background:#fff; color:#111}

  /* Sticky header pinned to the top of the table area on phones (black header with white text) */
  .admin-availability table.grid thead{display:block; background:#000; z-index:110}
  .admin-availability table.grid thead tr{display:table; width:100%; table-layout:fixed}
  /* Keep header visible at the top of the table block; no offset needed since tbody is the scroller */
  .admin-availability table.grid thead th{position:sticky; top:0; color:#fff; background:#000; z-index:110}

  /* Vertically scroll only the table body on mobile while preserving column alignment */
  .admin-availability table.grid tbody{display:block; max-height:60vh; overflow-y:auto; -webkit-overflow-scrolling:touch; scrollbar-gutter: stable both-edges}
  .admin-availability table.grid tbody tr{display:table; width:100%; table-layout:fixed}

  /* Stabilize widths and add Excel-like grid lines */
  .admin-availability table.grid th,
  .admin-availability table.grid td{box-sizing:border-box; vertical-align: top; border:1px solid #e0e0e0}
  /* Column widths (match th/td): */
  /* 1: ID */
  .admin-availability table.grid th:nth-child(1),
  .admin-availability table.grid td:nth-child(1){min-width:140px}
  /* Allow ID to wrap instead of overflowing to the right */
  .admin-availability table.grid td:nth-child(1){white-space:normal; overflow-wrap:anywhere; word-break:break-all}
  /* 2: Provider */
  .admin-availability table.grid th:nth-child(2),
  .admin-availability table.grid td:nth-child(2){min-width:160px}
  /* 3: Date */
  .admin-availability table.grid th:nth-child(3),
  .admin-availability table.grid td:nth-child(3){min-width:120px}
  /* 4: Start */
  .admin-availability table.grid th:nth-child(4),
  .admin-availability table.grid td:nth-child(4){min-width:110px}
  /* 5: End */
  .admin-availability table.grid th:nth-child(5),
  .admin-availability table.grid td:nth-child(5){min-width:110px}
  /* 6: Notes */
  .admin-availability table.grid th:nth-child(6),
  .admin-availability table.grid td:nth-child(6){min-width:300px}
  /* 7: Updated */
  .admin-availability table.grid th:nth-child(7),
  .admin-availability table.grid td:nth-child(7){min-width:180px}
  /* 8: User */
  .admin-availability table.grid th:nth-child(8),
  .admin-availability table.grid td:nth-child(8){min-width:140px}
  /* 9: Actions */
  .admin-availability table.grid th:nth-child(9),
  .admin-availability table.grid td:nth-child(9){min-width:112px}

  /* Reduce font size ~10% for table header and body cells */
  .admin-availability table.grid,
  .admin-availability table.grid th,
  .admin-availability table.grid td{font-size:90%}

  /* Actions column: keep compact so it doesn't force row height/width */
  .admin-availability table.grid th:last-child,
  .admin-availability table.grid td:last-child{white-space:nowrap}
  .admin-availability table.grid td .actions{display:flex; flex-direction:column; gap:6px; align-items:stretch}
  /* Make each action button show icon on top and label below */
  .admin-availability table.grid td .actions .btn{
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    gap:3px; text-align:center; width:100%;
    padding:5px 6px; line-height:1.1; min-width:auto; font-size:0; /* hide original text visually */
    overflow-wrap:anywhere
  }
  .admin-availability table.grid td .actions .btn[data-act="edit"]::before{content:'‚úèÔ∏è'; font-size:9px; line-height:1}
  .admin-availability table.grid td .actions .btn[data-act="edit"]::after{content:'ŒïœÄŒµŒæŒµœÅŒ≥Œ±œÉŒØŒ±'; font-size:10px; line-height:1.1}
  .admin-availability table.grid td .actions .btn[data-act="del"]::before{content:'üóëÔ∏è'; font-size:9px; line-height:1}
  .admin-availability table.grid td .actions .btn[data-act="del"]::after{content:'ŒîŒπŒ±Œ≥œÅŒ±œÜŒÆ'; font-size:10px; line-height:1.1}
  .modal .form-row.two{flex-direction:column}
}

/* Toggle visibility button shown only on mobile */
@media (max-width: 720px){
  .admin-availability .sticky-bar{position:sticky}
  .admin-availability .sticky-bar .toggle{
    position:absolute; right:8px; top:8px; width:28px; height:28px;
    display:flex; align-items:center; justify-content:center;
    background:#222; color:#fff; border:1px solid rgba(255,255,255,0.25);
    border-radius:6px; cursor:pointer; font-size:16px; line-height:1;
  }
  /* When collapsed, hide only the filters section (keep actions and table visible) */
  body.admin-availability.availability-collapsed #availabilityFilters{ display:none !important }
}

/* Hide the toggle on tablet/desktop */
@media (min-width: 721px){
  .admin-availability .sticky-bar .toggle{ display:none }
}
