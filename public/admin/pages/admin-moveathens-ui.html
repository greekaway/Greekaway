<!doctype html>
<html lang="el">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <title>Greekaway Admin – MoveAthens Transfers</title>
    <link rel="stylesheet" href="/css/admin-common.css">
    <link rel="stylesheet" href="/css/admin-theme-toggle.css">
    <link rel="stylesheet" href="/admin/css/admin-moveathens-ui.css">
    <link rel="stylesheet" href="/admin/css/admin-ma-drivers.css">
    <link rel="stylesheet" href="/admin/css/admin-ma-hotel-revenue.css">
    <link rel="manifest" href="/manifest-admin.json">
    <meta name="theme-color" content="#001f3f">
    <link rel="stylesheet" href="/pwa.css">
    <link rel="stylesheet" href="/css/pwa-fixes.css">
  </head>
  <body>
    <header class="sticky-bar" aria-label="MoveAthens Transfers">
      <div class="bar-inner">
        <div class="title">MoveAthens Transfers</div>
        <div class="bar-tabs">
          <button class="bar-tab active" data-tab="general">General</button>
          <button class="bar-tab" data-tab="categories">Κατηγορίες</button>
          <button class="bar-tab" data-tab="destinations">Προορισμοί</button>
          <button class="bar-tab" data-tab="vehicles">Οχήματα</button>
          <button class="bar-tab" data-tab="zones">Ξενοδοχεία</button>
          <button class="bar-tab" data-tab="pricing">Τιμολόγηση</button>
          <button class="bar-tab" data-tab="infopage">Πληροφορίες</button>
          <button class="bar-tab" data-tab="drivers">Αιτήματα Διαδρομών</button>
          <button class="bar-tab" data-tab="driversmgmt">Οδηγοί</button>
          <button class="bar-tab" data-tab="hotelrevenue">Έσοδα Ξενοδοχείων</button>

          <!-- Price visibility toggle -->
          <label class="ma-price-toggle" title="Εμφάνιση τιμής στο WhatsApp μήνυμα">
            <input type="checkbox" id="showPriceToggle" checked>
            <span class="ma-price-toggle__slider"></span>
            <span class="ma-price-toggle__label">💰 Τιμή</span>
          </label>
        </div>
      </div>
    </header>

    <main class="content-wrap">
      <!-- ===== GENERAL TAB ===== -->
      <div class="tab-content active" data-tab="general">
        <section class="panel">
          <form id="ma-form" class="ma-form" novalidate>
            <div class="ma-grid">
              <div class="ma-upload">
                <label>Hero Video (mp4)
                  <input id="heroVideoFile" class="input" type="file" accept="video/mp4">
                </label>
                <button id="heroVideoUploadBtn" class="btn secondary" type="button">Upload Video</button>
              </div>
              <div class="ma-upload">
                <label>Hero Logo Upload (png/svg/webp)
                  <input id="heroLogoFile" class="input" type="file" accept="image/png,image/svg+xml,image/webp">
                </label>
                <button id="heroLogoUploadBtn" class="btn secondary" type="button">Upload Logo</button>
                <input id="heroLogoUrl" type="hidden">
              </div>
              <label>Hero Headline
                <input id="heroHeadline" class="input" type="text" maxlength="120">
              </label>
              <label>Hero Subtext
                <textarea id="heroSubtext" class="input" rows="3" maxlength="220"></textarea>
              </label>
            </div>

            <h3 class="ma-subtitle">Footer</h3>
            <div class="ma-footer-rows">
              <div class="ma-footer-row">
                <div class="ma-footer-title">Home</div>
                <label>Label <input id="footerHome" class="input" type="text" maxlength="40"></label>
                <div class="ma-upload">
                  <label>Icon (SVG) <input id="footerIconHomeFile" class="input" type="file" accept="image/svg+xml"></label>
                  <button id="footerIconHomeUpload" class="btn secondary" type="button">Upload Icon</button>
                  <input id="footerIconHomeUrl" type="hidden">
                </div>
              </div>
              <div class="ma-footer-row">
                <div class="ma-footer-title">Transfer</div>
                <label>Label <input id="footerPrices" class="input" type="text" maxlength="40"></label>
                <div class="ma-upload">
                  <label>Icon (SVG) <input id="footerIconPricesFile" class="input" type="file" accept="image/svg+xml"></label>
                  <button id="footerIconPricesUpload" class="btn secondary" type="button">Upload Icon</button>
                  <input id="footerIconPricesUrl" type="hidden">
                </div>
              </div>
              <div class="ma-footer-row">
                <div class="ma-footer-title">AI Βοηθός</div>
                <label>Label <input id="footerCta" class="input" type="text" maxlength="40"></label>
                <div class="ma-upload">
                  <label>Icon (SVG) <input id="footerIconCtaFile" class="input" type="file" accept="image/svg+xml"></label>
                  <button id="footerIconCtaUpload" class="btn secondary" type="button">Upload Icon</button>
                  <input id="footerIconCtaUrl" type="hidden">
                </div>
              </div>
              <div class="ma-footer-row">
                <div class="ma-footer-title">Info</div>
                <label>Label <input id="footerInfo" class="input" type="text" maxlength="40"></label>
                <div class="ma-upload">
                  <label>Icon (SVG) <input id="footerIconInfoFile" class="input" type="file" accept="image/svg+xml"></label>
                  <button id="footerIconInfoUpload" class="btn secondary" type="button">Upload Icon</button>
                  <input id="footerIconInfoUrl" type="hidden">
                </div>
              </div>
              <div class="ma-footer-row">
                <div class="ma-footer-title">Context</div>
                <label>Label <input id="footerContext" class="input" type="text" maxlength="40"></label>
                <div class="ma-upload">
                  <label>Icon (SVG) <input id="footerIconContextFile" class="input" type="file" accept="image/svg+xml"></label>
                  <button id="footerIconContextUpload" class="btn secondary" type="button">Upload Icon</button>
                  <input id="footerIconContextUrl" type="hidden">
                </div>
              </div>
            </div>

            <h3 class="ma-subtitle">Contact</h3>
            <div class="ma-grid">
              <label>Phone Number <input id="phoneNumber" class="input" type="text" maxlength="30"></label>
              <label>WhatsApp Number <input id="whatsappNumber" class="input" type="text" maxlength="30"></label>
              <label>Company Email <input id="companyEmail" class="input" type="email" maxlength="120"></label>
            </div>

            <div class="ma-actions">
              <button id="saveBtn" class="btn" type="submit">Save</button>
              <div id="ma-status" class="ma-status" aria-live="polite"></div>
            </div>
          </form>
        </section>
      </div>

      <!-- ===== CATEGORIES TAB ===== -->
      <div class="tab-content" data-tab="categories">
        <section class="panel">
          <div class="ma-section-header">
            <div>
              <h3 class="ma-subtitle">Κατηγορίες Προορισμών</h3>
              <p class="ma-helper">Αεροδρόμια, Λιμάνια, Παραλίες, Μουσεία κ.λπ.</p>
            </div>
            <div class="ma-actions">
              <button id="maCategoryAddBtn" class="btn secondary" type="button">➕ Νέα Κατηγορία</button>
            </div>
          </div>

          <form id="ma-category-form" class="ma-zone-form" hidden>
            <div class="ma-zone-grid">
              <label>Όνομα Κατηγορίας
                <input id="maCategoryName" class="input" type="text" maxlength="60" required>
              </label>
              <label>Icon (emoji ή URL)
                <input id="maCategoryIcon" class="input" type="text" maxlength="200" placeholder="✈️ ή /path/to/icon.svg">
              </label>
              <div class="ma-upload-row">
                <label>Upload Icon (SVG)
                  <input id="maCategoryIconFile" class="input" type="file" accept="image/svg+xml,image/png,image/jpeg">
                </label>
                <button id="maCategoryIconUpload" class="btn secondary" type="button">Upload</button>
                <img id="maCategoryIconPreview" class="ma-icon-preview" alt="" data-visible="false">
              </div>
              <label>Σειρά Εμφάνισης (UI)
                <input id="maCategoryOrder" class="input" type="number" min="0" value="0" title="Καθορίζει μόνο τη σειρά εμφάνισης στο UI. Δεν επηρεάζει τιμές.">
                <small class="ma-hint">Καθορίζει μόνο τη σειρά εμφάνισης στο UI</small>
              </label>
              <label class="ma-zone-toggle">
                <input id="maCategoryActive" type="checkbox" checked>
                Ενεργή Κατηγορία
              </label>
            </div>
            <div class="ma-actions">
              <button id="maCategorySaveBtn" class="btn" type="submit">Αποθήκευση</button>
              <button id="maCategoryCancelBtn" class="btn secondary" type="button">Ακύρωση</button>
              <span id="maCategoryStatus" class="ma-status" aria-live="polite"></span>
            </div>
          </form>

          <div id="ma-categories-list" class="ma-zones-list" aria-live="polite"></div>
        </section>
      </div>

      <!-- ===== DESTINATIONS TAB ===== -->
      <div class="tab-content" data-tab="destinations">
        <section class="panel">
          <div class="ma-section-header">
            <div>
              <h3 class="ma-subtitle">Προορισμοί</h3>
              <p class="ma-helper">Κάθε προορισμός ανήκει σε μία κατηγορία.</p>
            </div>
            <div class="ma-actions">
              <button id="maDestinationAddBtn" class="btn secondary" type="button">➕ Νέος Προορισμός</button>
            </div>
          </div>

          <form id="ma-destination-form" class="ma-zone-form" hidden>
            <div class="ma-zone-grid">
              <label>Όνομα Προορισμού
                <input id="maDestinationName" class="input" type="text" maxlength="80" required>
              </label>
              <label>Περιγραφή (προαιρετικό)
                <textarea id="maDestinationDescription" class="input" rows="2" maxlength="160"></textarea>
              </label>
              <label>Κατηγορία
                <select id="maDestinationCategory" class="input" required>
                  <option value="">-- Επιλογή --</option>
                </select>
              </label>
              <label>Σειρά Εμφάνισης
                <input id="maDestinationOrder" class="input" type="number" min="0" value="0">
              </label>
              <label>Τύπος Διαδρομής (εσωτερικό)
                <select id="maDestinationRouteType" class="input">
                  <option value="">-- Χωρίς --</option>
                  <option value="airport">✈️ Αεροδρόμιο</option>
                  <option value="port">⚓ Λιμάνι</option>
                  <option value="city">🏙️ Πόλη</option>
                  <option value="travel">🚗 Ταξίδια</option>
                </select>
              </label>
              <label>Συντεταγμένες (εσωτερικό — lat,lng)
                <input id="maDestinationLatLng" class="input" type="text" placeholder="π.χ. 37.9715,23.7267" maxlength="50">
                <small style="color:#6b7280">Χρησιμοποιείται για πλοήγηση οδηγού. Δεν εμφανίζεται στον χρήστη.</small>
              </label>
              <label class="ma-zone-toggle">
                <input id="maDestinationActive" type="checkbox" checked>
                Ενεργός Προορισμός
              </label>
            </div>
            <div class="ma-actions">
              <button id="maDestinationSaveBtn" class="btn" type="submit">Αποθήκευση</button>
              <button id="maDestinationCancelBtn" class="btn secondary" type="button">Ακύρωση</button>
              <span id="maDestinationStatus" class="ma-status" aria-live="polite"></span>
            </div>
          </form>

          <div id="ma-destinations-list" class="ma-zones-list" aria-live="polite"></div>
        </section>
      </div>

      <!-- ===== VEHICLES TAB ===== -->
      <div class="tab-content" data-tab="vehicles">
        <section class="panel">
          <div class="ma-section-header">
            <div>
              <h3 class="ma-subtitle">Τύποι Οχημάτων</h3>
              <p class="ma-helper">Ορισμός οχημάτων με χωρητικότητα επιβατών και αποσκευών.</p>
            </div>
            <div class="ma-actions">
              <button id="maVehicleAddBtn" class="btn secondary" type="button">➕ Νέος Τύπος</button>
            </div>
          </div>

          <form id="ma-vehicle-form" class="ma-zone-form" hidden>
            <div class="ma-zone-grid">
              <label>Όνομα
                <input id="maVehicleName" class="input" type="text" maxlength="60" required>
              </label>
              <label>Περιγραφή (προαιρετικό)
                <textarea id="maVehicleDescription" class="input" rows="2" maxlength="160"></textarea>
              </label>
              <label>Φωτογραφία
                <input id="maVehicleImageFile" class="input" type="file" accept="image/*">
              </label>
              <div class="ma-upload">
                <button id="maVehicleImageUploadBtn" class="btn secondary" type="button">Upload Φωτογραφίας</button>
                <button id="maVehicleImageClearBtn" class="btn secondary" type="button">Καθαρισμός</button>
                <input id="maVehicleImageUrl" type="hidden">
                <img id="maVehicleImagePreview" class="ma-vehicle-preview" alt="">
              </div>

              <h4 class="ma-capacity-title">Χωρητικότητα</h4>
              <label>Μέγιστοι Επιβάτες
                <input id="maVehicleMaxPax" class="input" type="number" min="1" max="50" value="4">
              </label>
              <label>Μεγάλες Αποσκευές (large)
                <input id="maVehicleLuggageLarge" class="input" type="number" min="0" max="20" value="0">
              </label>
              <label>Μεσαίες Αποσκευές (medium)
                <input id="maVehicleLuggageMedium" class="input" type="number" min="0" max="20" value="0">
              </label>
              <label>Χειραποσκευές (cabin)
                <input id="maVehicleLuggageCabin" class="input" type="number" min="0" max="20" value="0">
              </label>

              <h4 class="ma-capacity-title">Κανόνες Κράτησης</h4>
              <div class="ma-toggles-row">
                <label class="ma-zone-toggle">
                  <input id="maVehicleAllowInstant" type="checkbox" checked>
                  Επιτρέπει άμεση κλήση (π.χ. Ταξί)
                </label>
                <label class="ma-zone-toggle">
                  <input id="maVehicleActive" type="checkbox" checked>
                  Ενεργός Τύπος
                </label>
              </div>
              <label>Ελάχιστος χρόνος κράτησης (λεπτά)
                <input id="maVehicleMinAdvance" class="input" type="number" min="0" max="1440" value="0">
                <small class="ma-hint">0 = άμεσα, 120 = 2 ώρες πριν (για μαύρα αυτοκίνητα)</small>
              </label>

              <label>Σειρά Εμφάνισης (UI)
                <input id="maVehicleOrder" class="input" type="number" min="0" value="0" title="Καθορίζει μόνο τη σειρά εμφάνισης στο UI (dropdowns/cards). Δεν επηρεάζει τιμές.">
                <small class="ma-hint">Καθορίζει μόνο τη σειρά εμφάνισης στο UI</small>
              </label>
            </div>
            <div class="ma-actions">
              <button id="maVehicleSaveBtn" class="btn" type="submit">Αποθήκευση</button>
              <button id="maVehicleCancelBtn" class="btn secondary" type="button">Ακύρωση</button>
              <span id="maVehicleStatus" class="ma-status" aria-live="polite"></span>
            </div>
          </form>

          <div id="ma-vehicles-list" class="ma-zones-list" aria-live="polite"></div>
        </section>
      </div>

      <!-- ===== HOTELS TAB (was Zones) ===== -->
      <div class="tab-content" data-tab="zones">
        <section class="panel">
          <div class="ma-section-header">
            <div>
              <h3 class="ma-subtitle">Ξενοδοχεία / Καταλύματα</h3>
              <p class="ma-helper">Κάθε ξενοδοχείο αντιστοιχεί σε μοναδικές τιμές transfer.</p>
            </div>
            <div class="ma-actions">
              <button id="maZoneAddBtn" class="btn secondary" type="button">➕ Νέο Ξενοδοχείο</button>
            </div>
          </div>

          <form id="ma-zone-form" class="ma-zone-form" hidden>
            <div class="ma-zone-grid">
              <label>Όνομα Ξενοδοχείου
                <input id="maZoneName" class="input" type="text" maxlength="120" required>
              </label>
              <label>Δήμος
                <input id="maZoneMunicipality" class="input" type="text" maxlength="120" placeholder="π.χ. Αθήνα, Γλυφάδα">
              </label>
              <label>Διεύθυνση
                <input id="maZoneAddress" class="input" type="text" maxlength="250" placeholder="π.χ. Λεωφ. Βασ. Αμαλίας 10">
              </label>
              <label>Τηλέφωνο
                <input id="maZonePhone" class="input" type="text" maxlength="30" placeholder="+30 210 ...">
              </label>
              <label>Email
                <input id="maZoneEmail" class="input" type="email" maxlength="120" placeholder="info@hotel.gr">
              </label>
              <label>Τύπος Καταλύματος
                <select id="maZoneAccommodationType" class="input" required>
                  <option value="hotel">Ξενοδοχείο</option>
                  <option value="rental_rooms">Ενοικιαζόμενα Δωμάτια</option>
                </select>
              </label>
              <label class="ma-zone-toggle">
                <input id="maZoneActive" type="checkbox" checked>
                Ενεργό Ξενοδοχείο
              </label>
            </div>
            <div class="ma-actions">
              <button id="maZoneSaveBtn" class="btn" type="submit">Αποθήκευση</button>
              <button id="maZoneCancelBtn" class="btn secondary" type="button">Ακύρωση</button>
              <span id="maZoneStatus" class="ma-status" aria-live="polite"></span>
            </div>
          </form>

          <div id="ma-zones-list" class="ma-zones-list" aria-live="polite"></div>
        </section>
      </div>

      <!-- ===== PRICING TAB ===== -->
      <div class="tab-content" data-tab="pricing">
        <section class="panel">
          <div class="ma-section-header">
            <div>
              <h3 class="ma-subtitle">Τιμολόγηση</h3>
              <p class="ma-helper">Τιμή = Ξενοδοχείο → Προορισμός → Ταρίφα → Τύπος Οχήματος</p>
            </div>
          </div>

          <div class="ma-price-controls">
            <label>Ξενοδοχείο (από)
              <div class="ma-autocomplete-wrap">
                <input id="maPriceHotelSearch" class="input" type="text" placeholder="Πληκτρολογήστε 2+ γράμματα…" autocomplete="off">
                <input id="maPriceOriginZone" type="hidden">
                <div id="maPriceHotelDropdown" class="ma-autocomplete-dropdown" hidden></div>
              </div>
            </label>
            <label>Προορισμός (προς)
              <select id="maPriceDestination" class="input"></select>
            </label>
            <label>Ταρίφα
              <select id="maPriceTariff" class="input">
                <option value="day">☀️ Ημερήσια (05:00 - 00:00)</option>
                <option value="night">🌙 Νυχτερινή (00:00 - 05:00)</option>
              </select>
            </label>
            <button id="maPriceLoadBtn" class="btn secondary" type="button">Φόρτωση Τιμών</button>
          </div>

          <form id="ma-pricing-form" class="ma-pricing-form" hidden>
            <div id="ma-pricing-grid" class="ma-pricing-grid"></div>
            <div class="ma-actions">
              <button id="maPriceSaveBtn" class="btn" type="submit">Αποθήκευση Τιμών</button>
              <span id="maPriceStatus" class="ma-status" aria-live="polite"></span>
            </div>
          </form>
        </section>
      </div>

      <!-- ===== INFO PAGE TAB ===== -->
      <div class="tab-content" data-tab="infopage">
        <section class="panel">
          <div class="ma-section-header">
            <div>
              <h3 class="ma-subtitle">Περιεχόμενο Σελίδας Πληροφοριών</h3>
              <p class="ma-helper">Οι ενότητες που εμφανίζονται στη σελίδα "Πληροφορίες" του MoveAthens. Ο πελάτης και ο AI assistant μπορούν να τις διαβάσουν.</p>
            </div>
          </div>

          <form id="ma-infopage-form" class="ma-infopage-form">
            <!-- Section 1: Γενικές Πληροφορίες Μεταφορών -->
            <div class="ma-info-section">
              <h4 class="ma-info-section-title">📍 Γενικές Πληροφορίες Μεταφορών</h4>
              <div class="ma-field">
                <label>Τίτλος
                  <input id="maInfoPageTitle" class="input" type="text" maxlength="100" placeholder="π.χ. Μεταφορές">
                </label>
              </div>
              <div class="ma-field">
                <label>Περιεχόμενο (υποστηρίζει Markdown)
                  <textarea id="maInfoPageContent" class="input ma-textarea-medium" rows="8" placeholder="Γράψτε εδώ τις γενικές πληροφορίες μεταφορών..."></textarea>
                </label>
              </div>
            </div>

            <!-- Section 2: Πολιτική Ακυρώσεων -->
            <div class="ma-info-section">
              <h4 class="ma-info-section-title">🚫 Πολιτική Ακυρώσεων</h4>
              <div class="ma-field">
                <label>Τίτλος
                  <input id="maInfoCancellationTitle" class="input" type="text" maxlength="100" placeholder="π.χ. Πολιτική Ακυρώσεων">
                </label>
              </div>
              <div class="ma-field">
                <label>Περιεχόμενο
                  <textarea id="maInfoCancellationContent" class="input ma-textarea-medium" rows="8" placeholder="Γράψτε εδώ την πολιτική ακυρώσεων..."></textarea>
                </label>
              </div>
            </div>

            <!-- Section 3: Πολιτική Συμμόρφωσης -->
            <div class="ma-info-section">
              <h4 class="ma-info-section-title">📋 Πολιτική Συμμόρφωσης Επιβατών</h4>
              <div class="ma-field">
                <label>Τίτλος
                  <input id="maInfoComplianceTitle" class="input" type="text" maxlength="100" placeholder="π.χ. Κανόνες Επιβατών">
                </label>
              </div>
              <div class="ma-field">
                <label>Περιεχόμενο
                  <textarea id="maInfoComplianceContent" class="input ma-textarea-medium" rows="8" placeholder="π.χ. Ο πελάτης δεν έχει δικαίωμα αλλαγής διαδρομής, αλλά μπορεί να κάνει σύντομη στάση 5 λεπτών..."></textarea>
                </label>
              </div>
            </div>

            <!-- Section 4: Συχνές Ερωτήσεις -->
            <div class="ma-info-section">
              <h4 class="ma-info-section-title">❓ Συχνές Ερωτήσεις (FAQ)</h4>
              <div class="ma-field">
                <label>Τίτλος
                  <input id="maInfoFaqTitle" class="input" type="text" maxlength="100" placeholder="π.χ. Συχνές Ερωτήσεις">
                </label>
              </div>
              <div class="ma-field">
                <label>Περιεχόμενο
                  <textarea id="maInfoFaqContent" class="input ma-textarea-medium" rows="8" placeholder="Γράψτε εδώ τις συχνές ερωτήσεις & απαντήσεις..."></textarea>
                </label>
              </div>
            </div>

            <div class="ma-actions">
              <button id="maInfoPageSaveBtn" class="btn" type="submit">💾 Αποθήκευση Όλων</button>
              <span id="maInfoPageStatus" class="ma-status" aria-live="polite"></span>
            </div>
          </form>

          <div class="ma-preview-section">
            <h4 class="ma-preview-title">Προεπισκόπηση (scroll down για όλες τις ενότητες)</h4>
            <div id="maInfoPagePreview" class="ma-preview-box ma-preview-scroll"></div>
          </div>
        </section>
      </div>

      <!-- ===== DRIVERS TAB ===== -->
      <div class="tab-content" data-tab="drivers">
        <section class="panel">
          <div class="ma-section-header">
            <div>
              <h3 class="ma-subtitle">📋 Αιτήματα Transfer</h3>
              <p class="ma-helper">Αιτήματα που δημιουργούνται αυτόματα όταν ο ξενοδόχος πατήσει WhatsApp.</p>
            </div>
            <div class="dr-filter-bar" style="margin:0">
              <select id="req-filter-status">
                <option value="">Όλα</option>
                <option value="pending">Αναμονή</option>
                <option value="sent">Εστάλη</option>
              </select>
              <button class="btn secondary" id="req-refresh-btn" type="button">🔄 Ανανέωση</button>
            </div>
          </div>

          <div class="dr-table-wrap">
            <table class="dr-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Ξενοδοχείο</th>
                  <th>Προορισμός</th>
                  <th>Όχημα</th>
                  <th>Τιμή</th>
                  <th>Πελάτης</th>
                  <th>Status</th>
                  <th>Τηλ. Οδηγού</th>
                  <th>Ενέργειες</th>
                </tr>
              </thead>
              <tbody id="req-tbody"></tbody>
            </table>
          </div>
          <div class="dr-empty" id="req-empty" style="display:none">Δεν υπάρχουν αιτήματα.</div>
        </section>

        <section class="panel" style="margin-top:20px">
          <div class="ma-section-header">
            <div>
              <h3 class="ma-subtitle">✅ Αποδεκτές Διαδρομές Οδηγών</h3>
              <p class="ma-helper">Εμφανίζονται αυτόματα μετά αποδοχή. Αυτο-διαγραφή: 2ω μετά (άμεσα) ή 2ω μετά την ώρα κράτησης (προγρ.).</p>
            </div>
          </div>

          <div class="dr-table-wrap">
            <table class="dr-table">
              <thead>
                <tr>
                  <th>Κωδικός</th>
                  <th>Οδηγός</th>
                  <th>Τηλέφωνο</th>
                  <th>Διαδρομή</th>
                  <th>Όχημα</th>
                  <th>Τιμή</th>
                  <th>Τύπος</th>
                  <th>Αποδοχή</th>
                  <th>Λεπτομέρειες</th>
                </tr>
              </thead>
              <tbody id="acc-tbody"></tbody>
            </table>
          </div>
          <div class="dr-empty" id="acc-empty" style="display:none">Δεν υπάρχουν αποδεκτές διαδρομές.</div>
        </section>

      </div> <!-- end Αιτήματα Διαδρομών tab -->

      <!-- ===== DRIVER MANAGEMENT TAB (Οδηγοί) ===== -->
      <div class="tab-content" data-tab="driversmgmt">
        <section class="panel">
          <div class="ma-section-header">
            <div>
              <h3 class="ma-subtitle">👤 Οδηγοί — Οικονομική Επισκόπηση</h3>
              <p class="ma-helper">Μόνιμος πίνακας. Στοιχεία οδηγών, έσοδα, πληρωμές &amp; υπόλοιπα.</p>
            </div>
            <div class="dr-filter-bar" style="margin:0">
              <label style="font-size:13px;display:flex;align-items:center;gap:6px">Ταξινόμηση:
                <select id="drvmgmt-sort-field">
                  <option value="name">Όνομα</option>
                  <option value="total_trips">Διαδρομές</option>
                  <option value="total_revenue">Έσοδα</option>
                  <option value="total_owed">Οφειλόμενα</option>
                  <option value="total_paid">Πληρωμένα</option>
                  <option value="balance">Υπόλοιπο</option>
                </select>
              </label>
              <select id="drvmgmt-sort-dir">
                <option value="desc">▼ Μεγαλύτερα πρώτα</option>
                <option value="asc">▲ Μικρότερα πρώτα</option>
              </select>
              <button class="btn secondary" id="drvmgmt-refresh-btn" type="button">🔄 Ανανέωση</button>
            </div>
          </div>

          <!-- Date range filter -->
          <div class="dr-filter-bar" style="margin-top:8px;flex-wrap:wrap">
            <label style="font-size:13px;display:flex;align-items:center;gap:6px">Από:
              <input type="date" id="drvmgmt-date-from" class="input" style="width:150px;padding:4px 8px;font-size:13px">
            </label>
            <label style="font-size:13px;display:flex;align-items:center;gap:6px">Έως:
              <input type="date" id="drvmgmt-date-to" class="input" style="width:150px;padding:4px 8px;font-size:13px">
            </label>
            <button class="btn secondary" id="drvmgmt-date-apply" type="button" style="font-size:12px;padding:4px 12px">📅 Φίλτρο</button>
            <button class="btn secondary" id="drvmgmt-date-clear" type="button" style="font-size:12px;padding:4px 12px">✕ Καθαρισμός</button>
            <span id="drvmgmt-date-info" style="font-size:12px;color:var(--text-muted,#888)"></span>
          </div>

          <div class="dr-table-wrap">
            <table class="dr-table">
              <thead>
                <tr>
                  <th>Όνομα</th>
                  <th>Τηλέφωνο</th>
                  <th>Διαδρομές</th>
                  <th>Έσοδα</th>
                  <th>Οφειλόμενα</th>
                  <th>Πληρωμένα</th>
                  <th>Υπόλοιπο</th>
                  <th>Ενέργειες</th>
                </tr>
              </thead>
              <tbody id="drvmgmt-tbody"></tbody>
            </table>
          </div>
          <div class="dr-empty" id="drvmgmt-empty" style="display:none">Δεν υπάρχουν οδηγοί.</div>
        </section>
      </div>

      <!-- ===== HOTEL REVENUE TAB (Έσοδα Ξενοδοχείων) ===== -->
      <div class="tab-content" data-tab="hotelrevenue">
        <section class="panel" id="hotel-revenue-section">
          <div class="ma-section-header">
            <div>
              <h3 class="ma-subtitle">🏨 Ξενοδοχεία — Οικονομική Επισκόπηση</h3>
              <p class="ma-helper">Διαδρομές, τζίρος, προμήθειες &amp; τύποι διαδρομών ανά ξενοδοχείο.</p>
            </div>
            <div class="dr-filter-bar" style="margin:0">
              <label style="font-size:13px;display:flex;align-items:center;gap:6px">Ταξινόμηση:
                <select id="hotel-rev-sort-field">
                  <option value="hotel_name">Όνομα</option>
                  <option value="total_routes">Διαδρομές</option>
                  <option value="total_revenue">Έσοδα</option>
                  <option value="total_commission">Προμήθειες</option>
                </select>
              </label>
              <select id="hotel-rev-sort-dir">
                <option value="desc">▼ Μεγαλύτερα πρώτα</option>
                <option value="asc">▲ Μικρότερα πρώτα</option>
              </select>
              <button class="btn secondary" id="hotel-rev-refresh" type="button">🔄 Ανανέωση</button>
            </div>
          </div>

          <!-- Date range filter -->
          <div class="dr-filter-bar" style="margin-top:8px;flex-wrap:wrap">
            <label style="font-size:13px;display:flex;align-items:center;gap:6px">Από:
              <input type="date" id="hotel-rev-date-from" class="input" style="width:150px;padding:4px 8px;font-size:13px">
            </label>
            <label style="font-size:13px;display:flex;align-items:center;gap:6px">Έως:
              <input type="date" id="hotel-rev-date-to" class="input" style="width:150px;padding:4px 8px;font-size:13px">
            </label>
            <button class="btn secondary" id="hotel-rev-date-apply" type="button" style="font-size:12px;padding:4px 12px">📅 Φίλτρο</button>
            <button class="btn secondary" id="hotel-rev-date-clear" type="button" style="font-size:12px;padding:4px 12px">✕ Καθαρισμός</button>
            <span id="hotel-rev-date-info" style="font-size:12px;color:var(--text-muted,#888)"></span>
          </div>

          <div class="dr-table-wrap" style="margin-top:12px">
            <table class="dr-table" id="hotel-rev-table">
              <thead>
                <tr>
                  <th>Ξενοδοχείο</th>
                  <th>Διαδρομές</th>
                  <th>Έσοδα (€)</th>
                  <th>Προμήθειες (€)</th>
                  <th>Τύποι Διαδρ.</th>
                </tr>
              </thead>
              <tbody id="hotel-rev-tbody"></tbody>
            </table>
          </div>
          <div class="dr-empty" id="hotel-rev-empty" style="display:none">Δεν υπάρχουν δεδομένα ξενοδοχείων.</div>
        </section>
      </div>

      <!-- Shared: Driver Detail Modal -->
      <div class="dr-overlay hidden" id="driver-modal">
        <div class="dr-modal">
          <div class="dr-modal-title">
            <span id="dm-title">Οδηγός</span>
            <button class="dr-modal-close" id="dm-close">&times;</button>
          </div>
          <div class="dr-driver-card" id="dm-stats"></div>
          <div style="margin-top:16px">
            <h4 class="ma-subtitle">💳 Καταγραφή Πληρωμής</h4>
            <div class="dr-pay-form" id="dm-pay-form">
              <label>Ποσό (€) <input type="number" id="dm-pay-amount" min="1" step="1" placeholder="0"></label>
              <label>Σημείωση <input type="text" id="dm-pay-note" maxlength="200" placeholder="π.χ. Μετρητά 10/2"></label>
              <button class="btn" id="dm-pay-btn" type="button">💰 Καταχώρηση</button>
            </div>
          </div>
          <div style="margin-top:16px">
            <h4 class="ma-subtitle">📜 Ιστορικό Πληρωμών</h4>
            <div class="dr-table-wrap">
              <table class="dr-table"><thead><tr><th>Ημ/νία</th><th>Ποσό</th><th>Σημείωση</th></tr></thead><tbody id="dm-payments-tbody"></tbody></table>
            </div>
          </div>
          <div style="margin-top:16px">
            <h4 class="ma-subtitle">🗺️ Ιστορικό Διαδρομών</h4>
            <div class="dr-table-wrap">
              <table class="dr-table"><thead><tr><th>Ημ/νία</th><th>Ξενοδοχείο</th><th>Προορισμός</th><th>Τιμή</th><th>Status</th></tr></thead><tbody id="dm-trips-tbody"></tbody></table>
            </div>
          </div>
        </div>
      </div>
      <div class="dr-toast" id="dr-toast"></div>

      <!-- Styled confirm dialog (shared) -->
      <div class="dr-confirm-overlay hidden" id="dr-confirm">
        <div class="dr-confirm-box">
          <h4 id="dr-confirm-title">Επιβεβαίωση</h4>
          <p id="dr-confirm-msg"></p>
          <div class="dr-confirm-actions">
            <button class="dr-btn dr-btn-ghost" id="dr-confirm-cancel">Ακύρωση</button>
            <button class="dr-btn dr-btn-danger" id="dr-confirm-ok">Διαγραφή</button>
          </div>
        </div>
      </div>
    </main>

    <div id="ma-toast" class="ma-toast" role="status" aria-live="polite"></div>
    <div id="maConfirmModal" class="ma-modal" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="ma-modal__backdrop" data-action="close"></div>
      <div class="ma-modal__content" role="document">
        <h4 id="maConfirmTitle" class="ma-modal__title">Επιβεβαίωση</h4>
        <p id="maConfirmMessage" class="ma-modal__message"></p>
        <div class="ma-modal__actions">
          <button id="maConfirmCancel" class="btn secondary" type="button">Ακύρωση</button>
          <button id="maConfirmOk" class="btn" type="button">Διαγραφή</button>
        </div>
      </div>
    </div>

    <script src="/admin/js/admin-moveathens-ui.js"></script>
    <script src="/admin/js/admin-ma-drivers.js"></script>
    <script src="/admin/js/admin-ma-hotel-revenue.js"></script>
    <script src="/js/admin-theme-toggle.js"></script>
    <script src="/pwa-install.js" defer></script>
    <script src="/js/main.js"></script>
    <script src="/admin/js/admin-footer.js"></script>
  </body>
</html>
