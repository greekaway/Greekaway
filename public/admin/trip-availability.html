<!doctype html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Trip Availability Editor</title>
  <!-- Custom calendar grid (flatpickr removed) -->
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/admin-common.css" />
  <link rel="stylesheet" href="/css/admin-availability.css" />
  <link rel="stylesheet" href="/admin/css/trip-availability.css" />
</head>
<body>
  <div class="avail-wrapper">
    <h1 style="margin:0 0 12px;font-size:20px">Διαθεσιμότητα Εκδρομής</h1>
    <div class="grid">
      <div class="editor-card">
        <label for="tripSelect">Trip</label>
        <select id="tripSelect"><option value="">— Φόρτωση...</option></select>
        <label for="modeSelect">Mode</label>
        <select id="modeSelect">
          <option value="bus">Bus</option>
          <option value="van" selected>Van</option>
          <option value="mercedes">Mercedes</option>
        </select>
        <label for="monthSelect">Μήνας</label>
        <div class="month-nav">
          <button id="prevMonthBtn" type="button" aria-label="Προηγούμενος μήνας">◀</button>
          <input id="monthSelect" type="month" />
          <button id="nextMonthBtn" type="button" aria-label="Επόμενος μήνας">▶</button>
        </div>
        <div id="calendar-container"></div>
        <div class="calendar-legend">
          <span><span class="legend-box legend-full"></span> Full (A=0)</span>
          <span><span class="legend-box legend-low"></span> Low (≤25%)</span>
          <span><span class="legend-box legend-available"></span> Available</span>
        </div>
        <p class="badges-note">Κάντε κλικ σε ημέρα: εμφανίζει και επεξεργάζεται capacity / taken / available.</p>
      </div>
      <div class="editor-card">
        <h2 style="margin:0 0 8px;font-size:16px">Ημέρα</h2>
        <div id="selectedDateDisplay" style="font-size:14px;color:#fff;margin-bottom:8px">Καμία ημερομηνία</div>
        <label for="capacityInput">Capacity</label>
        <input id="capacityInput" type="number" min="0" value="0" />
        <label for="takenInput">Taken</label>
        <input id="takenInput" type="number" min="0" value="0" />
        <label for="availableInput">Available</label>
        <input id="availableInput" type="number" readonly value="0" />
        <button id="saveBtn" class="save-btn" disabled>Αποθήκευση</button>
        <div id="saveMsg" style="margin-top:8px;font-size:13px"></div>
      </div>
    </div>
  </div>
  <nav class="bottom-nav" style="margin-top:24px">
    <a href="/admin-home.html">Home</a>
    <a href="/admin-bookings.html">Bookings</a>
    <a href="/admin-payments.html">Payments</a>
    <a href="/admin-manual.html">Manual</a>
    <a href="/admin-providers.html">Providers</a>
    <a href="/admin-availability.html">Availability</a>
    <a href="/admin/trip-availability.html" class="active">Trip Availability</a>
  </nav>
  <footer class="version">Greekaway Admin • v<span id="ga-version">—</span></footer>
  <!-- Flatpickr scripts removed after refactor -->
  <script src="/js/main.js"></script>
  <script src="/admin/trip-availability.js" defer></script>
  <script>fetch('/version.json').then(r=>r.ok?r.json():null).then(v=>{ if(v){document.getElementById('ga-version').textContent=v.version||'—'} })</script>
</body>
</html>